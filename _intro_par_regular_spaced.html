<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>HDF5: Writing by Regularly Spaced Data</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
  $(document).ready(function() { init_search(); });
/* @license-end */
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="hdf5doxy.css" rel="stylesheet" type="text/css">
<!-- <link href="hdf5doxy.css" rel="stylesheet" type="text/css"/>
 -->
<script type="text/javascript" src="hdf5_navtree_hacks.js"></script>
</head>
<body>
<div style="background:#FFDDDD;font-size:120%;text-align:center;margin:0;padding:5px">Please, help us to better serve our user community by answering the following short survey:  <a href="https://www.hdfgroup.org/website-survey/">https://www.hdfgroup.org/website-survey/</a></div>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="HDFG-logo.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname"><a href="https://www.hdfgroup.org">HDF5</a>
   &#160;<span id="projectnumber">1.15.0.f39b228</span>
   </div>
   <div id="projectbrief">API Reference</div>
  </td>
   <td>        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.svg"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.svg" alt=""/></a>
          </span>
        </div>
</td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('_intro_par_regular_spaced.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">Writing by Regularly Spaced Data </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>Navigate back: <a class="el" href="index.html">Main</a> / <a class="el" href="_getting_started.html">Getting Started with HDF5</a> / <a class="el" href="_intro_par_h_d_f5.html">A Brief Introduction to Parallel HDF5</a> </p><hr  />
<p>In this case, each process writes data from a contiguous buffer into disconnected locations in the file, using a regular pattern.</p>
<p>In C it is done by selecting a hyperslab in a file that consists of regularly spaced columns. In F90, it is done by selecting a hyperslab in a file that consists of regularly spaced rows. </p><table class="doxtable">
<tr>
<th><b>Figure a</b> C Example </th><th><b>Figure b</b> Fortran Example </th></tr>
<tr>
<td><div class="image">
<img src="preg_figa.gif" alt=""/>
</div>
  </td><td><div class="image">
<img src="preg_figb.gif" alt=""/>
</div>
   </td></tr>
</table>
<h1><a class="anchor" id="secIntroParRegularSpacedC"></a>
Writing Regularly Spaced Columns in C</h1>
<p>In this example, you have two processes that write to the same dataset, each writing to every other column in the dataset. For each process the hyperslab in the file is set up as follows: </p><div class="fragment"><div class="line">89      count[0] = 1;</div>
<div class="line">90      count[1] = dimsm[1];</div>
<div class="line">91      offset[0] = 0;</div>
<div class="line">92      offset[1] = mpi_rank;</div>
<div class="line">93      stride[0] = 1;</div>
<div class="line">94      stride[1] = 2;</div>
<div class="line">95      block[0] = dimsf[0];</div>
<div class="line">96      block[1] = 1;</div>
</div><!-- fragment --><p>The stride is 2 for dimension 1 to indicate that every other position along this dimension will be written to. A stride of 1 indicates that every position along a dimension will be written to.</p>
<p>For two processes, the mpi_rank will be either 0 or 1. Therefore: </p><ul>
<li>Process 0 writes to even columns (0, 2, 4...) </li>
<li>Process 1 writes to odd columns (1, 3, 5...)</li>
</ul>
<p>The block size allows each process to write a column of data to every other position in the dataset.</p>
<table class="doxtable">
<tr>
<td><div class="image">
<img src="preg_figc.gif" alt=""/>
</div>
   </td></tr>
</table>
<p>Below is an example program for writing hyperslabs by column in Parallel HDF5: </p><table class="doxtable">
<tr>
<td><a href="https://github.com/HDFGroup/hdf5-examples/blob/master/C/H5Parallel/ph5_hyperslab_by_col.c">hyperslab_by_col.c</a>   </td></tr>
</table>
<p>The following is the output from h5dump for the HDF5 file created by this example: </p><div class="fragment"><div class="line">HDF5 <span class="stringliteral">&quot;SDS_col.h5&quot;</span> {</div>
<div class="line">GROUP <span class="stringliteral">&quot;/&quot;</span> {</div>
<div class="line">   DATASET <span class="stringliteral">&quot;IntArray&quot;</span> {</div>
<div class="line">      DATATYPE  <a class="code" href="group___p_d_t_s_t_d.html#ga37e8a6be7ee64587c2a282b965019bb8">H5T_STD_I32BE</a>  </div>
<div class="line">      DATASPACE  SIMPLE { ( 8, 6 ) / ( 8, 6 ) } </div>
<div class="line">      DATA {</div>
<div class="line">         1, 2, 10, 20, 100, 200,</div>
<div class="line">         1, 2, 10, 20, 100, 200,</div>
<div class="line">         1, 2, 10, 20, 100, 200,</div>
<div class="line">         1, 2, 10, 20, 100, 200,</div>
<div class="line">         1, 2, 10, 20, 100, 200,</div>
<div class="line">         1, 2, 10, 20, 100, 200,</div>
<div class="line">         1, 2, 10, 20, 100, 200,</div>
<div class="line">         1, 2, 10, 20, 100, 200</div>
<div class="line">      } </div>
<div class="line">   } </div>
<div class="line">} </div>
<div class="line">} </div>
<div class="ttc" id="agroup___p_d_t_s_t_d_html_ga37e8a6be7ee64587c2a282b965019bb8"><div class="ttname"><a href="group___p_d_t_s_t_d.html#ga37e8a6be7ee64587c2a282b965019bb8">H5T_STD_I32BE</a></div><div class="ttdeci">#define H5T_STD_I32BE</div><div class="ttdef"><b>Definition:</b> H5Tpublic.h:305</div></div>
</div><!-- fragment --><h1><a class="anchor" id="secIntroParRegularSpacedFort"></a>
Writing Regularly Spaced Rows in Fortran</h1>
<p>In this example, you have two processes that write to the same dataset, each writing to every other row in the dataset. For each process the hyperslab in the file is set up as follows:</p>
<p>You would define the size of the hyperslab to write to the dataset as follows: </p><div class="fragment"><div class="line">83       ! Each process defines dataset in memory and writes it to </div>
<div class="line">84       ! the hyperslab in the file.</div>
<div class="line">85       !</div>
<div class="line">86       count(1) = dimsm(1)</div>
<div class="line">87       count(2) = 1</div>
<div class="line">88       offset(1) = mpi_rank</div>
<div class="line">89       offset(2) = 0</div>
<div class="line">90       stride(1) = 2</div>
<div class="line">91       stride(2) = 1</div>
<div class="line">92       block(1) = 1</div>
<div class="line">93       block(2) = dimsf(2)</div>
</div><!-- fragment --><p>The stride is 2 for dimension 1 to indicate that every other position along this dimension will be written to. A stride of 1 indicates that every position along a dimension will be written to.</p>
<p>For two process, the mpi_rank will be either 0 or 1. Therefore: </p><ul>
<li>Process 0 writes to even rows (0, 2, 4 ...) </li>
<li>Process 1 writes to odd rows (1, 3, 5 ...)</li>
</ul>
<p>The block size allows each process to write a row of data to every other position in the dataset, rather than just a point of data.</p>
<p>The following shows the data written by Process 1 to the file: </p><table class="doxtable">
<tr>
<td><div class="image">
<img src="preg_figd.gif" alt=""/>
</div>
   </td></tr>
</table>
<p>Below is the example program for writing hyperslabs by column in Parallel HDF5: </p><table class="doxtable">
<tr>
<td><a href="https://github.com/HDFGroup/hdf5-examples/blob/master/Fortran/H5Parallel/ph5_f90_hyperslab_by_row.F90">hyperslab_by_row.F90</a>   </td></tr>
</table>
<p>The output for h5dump on the file created by this program will look like the output as shown above for the C example. This is because h5dump is written in C. The data would be displayed in rows if it were printed using Fortran 90 code.</p>
<hr  />
<p> Navigate back: <a class="el" href="index.html">Main</a> / <a class="el" href="_getting_started.html">Getting Started with HDF5</a> / <a class="el" href="_intro_par_h_d_f5.html">A Brief Introduction to Parallel HDF5</a> </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.9.1 </li>
  </ul>
</div>
</body>
</html>
