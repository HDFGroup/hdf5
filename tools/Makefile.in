## Tools HDF5 Makefile(.in)
##
## Copyright (C) 2001 National Center for Supercomputing Applications.
##                    All rights reserved.
##
top_srcdir=@top_srcdir@
top_builddir=..
srcdir=@srcdir@

## All subdirectories except for the ``lib'' subdirectory.
##
SUBDIRS=h5dump h5ls misc gifconv

@COMMENCE@

## Add include directory to the C preprocessor flags, add -lh5tools and
## -lhdf5 to the list of libraries.
##
CPPFLAGS=-I. -I$(srcdir) -I$(top_builddir)/src -I$(top_srcdir)/src  \
         -I$(top_srcdir)/tools/lib @CPPFLAGS@

## Test programs and scripts.
##
TEST_PROGS=
TEST_SCRIPTS=

## These are our main targets: library and tools.
##
LIBTOOLS=$(top_builddir)/tools/lib/libh5tools.la
LIBHDF5=$(top_builddir)/src/libhdf5.la

PROGS=$(PUB_PROGS) $(TEST_PROGS)

## Source and object files for the tests
##
TEST_SRC=
TEST_OBJ=$(TEST_SRC:.c=.lo)

lib ::
	(cd lib && $(MAKE) $@) || exit 1;

progs: $(LIBTOOLS) $(LIBHDF5)
	@@SETX@; for d in $(SUBDIRS); do                                      \
	   (cd $$d && $(MAKE) $@) || exit 1;                                  \
	done

dep depend:
	@@SETX@; for d in lib $(SUBDIRS); do		      \
	   (cd $$d && $(MAKE) $@) || exit 1;				      \
	done

check tests test _test: $(PROGS)
	@@SETX@; for d in lib $(SUBDIRS); do                                  \
	   (cd $$d && $(MAKE) $@) || exit 1;                                  \
	done

uninstall:
	@@SETX@; for d in lib $(SUBDIRS); do                                  \
	   (cd $$d && $(MAKE) $@) || exit 1;                                  \
	done

install:
	@@SETX@; for d in lib $(SUBDIRS); do                                  \
	   (cd $$d && $(MAKE) $@) || exit 1;                                  \
	done

install-doc:
	@@SETX@; for d in lib $(SUBDIRS); do                                  \
	   (cd $$d && $(MAKE) $@);                                            \
	done

.PHONY: all lib progs test _test install uninstall clean           \
	mostlyclean distclean maintainer-clean

clean mostlyclean:
	@@SETX@; for d in lib $(SUBDIRS); do                                  \
	   (cd $$d && $(MAKE) $@);                                            \
	done

distclean:
	@@SETX@; for d in lib $(SUBDIRS); do                                  \
	   (cd $$d && $(MAKE) $@);                                            \
	done
	-$(RM) Makefile

maintainer-clean:
	@@SETX@; for d in lib $(SUBDIRS); do                                  \
	   (cd $$d && $(MAKE) $@);                                            \
	done

