## HDF5-C++ examples/Makefile(.in)
##
## Copyright (C) 2000, 2001
##    National Center for Supercomputing Applications
##    All rights reserved.
##
##
top_srcdir=@top_srcdir@/..
top_builddir=../..
srcdir=@srcdir@

@COMMENCE@

EXAMPLEDIR=$(docdir)/hdf5/examples/c++

hdf5_srcdir=$(top_srcdir)/src
hdf5_builddir=$(top_builddir)/src

## Obtain default library; the current version of libtool does not fully
## support C++ yet, and it does not know which default library to find.
## With libtool 1.5, this support can be removed.  - BMR - Jan, 2002 
DEFAULT_LIBS=@DEFAULT_LIBS@

## Add include directory to the cpp preprocessor flags
CPPFLAGS=-I. -I../src -I$(srcdir)/../src -I$(hdf5_builddir) -I$(hdf5_srcdir) @CPPFLAGS@

## Add the C++ API library and the hdf5 library to the library lists
LIB=../src/libhdf5_cpp.la
LIBHDF5=$(hdf5_builddir)/libhdf5.la

## List all source files here. The list of object files will be
## created by replacing the `.cpp' with a `.lo'. This list is necessary
## for building automatic dependencies.
TEST_SRC=compound.cpp h5group.cpp create.cpp readdata.cpp chunks.cpp	\
         extend_ds.cpp writedata.cpp
TEST_OBJ=$(TEST_SRC:.cpp=.lo)

H5_FILES=Attributes.h5 SDScompound.h5 Select.h5 SDSextendible.h5 Group.h5 SDS.h5
EXAMPLE_PROGS=$(TEST_SRC) $(H5_FILES)

## These are the programs that `make all' or `make tests' will build and which
## `make check' will run. List them in the order they should be run.
TEST_PROGS=$(TEST_SRC:.cpp=)

##TEST_SCRIPTS=$(srcdir)/testexamples.sh

## These are the files that `make clean' (and derivatives) will remove from
## this directory.
CLEAN=

## How to build the programs... they all depend on the Fortran & C hdf5 libraries
$(TEST_PROGS): $(LIB) $(LIBHDF5)

compound: compound.lo 
	@$(LT_LINK_EXE) $(CXXFLAGS) -o $@ compound.lo $(LDFLAGS) $(LIB) $(LIBS) $(LIBHDF5) $(DEFAULT_LIBS)

h5group: h5group.lo 
	@$(LT_LINK_EXE) $(CXXFLAGS) -o $@ h5group.lo $(LDFLAGS) $(LIB) $(LIBS) $(LIBHDF5) $(DEFAULT_LIBS)

create: create.lo 
	@$(LT_LINK_EXE) $(CXXFLAGS) -o $@ create.lo $(LDFLAGS) $(LIB) $(LIBS) $(LIBHDF5) $(DEFAULT_LIBS)

readdata: readdata.lo 
	@$(LT_LINK_EXE) $(CXXFLAGS) -o $@ readdata.lo $(LDFLAGS) $(LIB) $(LIBS) $(LIBHDF5) $(DEFAULT_LIBS)

chunks: chunks.lo 
	@$(LT_LINK_EXE) $(CXXFLAGS) -o $@ chunks.lo $(LDFLAGS) $(LIB) $(LIBS) $(LIBHDF5) $(DEFAULT_LIBS)

extend_ds: extend_ds.lo 
	@$(LT_LINK_EXE) $(CXXFLAGS) -o $@ extend_ds.lo $(LDFLAGS) $(LIB) $(LIBS) $(LIBHDF5) $(DEFAULT_LIBS)

writedata: writedata.lo 
	@$(LT_LINK_EXE) $(CXXFLAGS) -o $@ writedata.lo $(LDFLAGS) $(LIB) $(LIBS) $(LIBHDF5) $(DEFAULT_LIBS)

@CONCLUDE@
