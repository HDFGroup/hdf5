##
## Copyright by the Board of Trustees of the University of Illinois.
## All rights reserved.
##
## This file is part of HDF5.  The full HDF5 copyright notice, including
## terms governing use, modification, and redistribution, is contained in
## the files COPYING and Copyright.html.  COPYING can be found at the root
## of the source code distribution tree; Copyright.html can be found at the
## root level of an installed copy of the electronic HDF5 document set and
## is linked from the top-level documents page.  It can also be found at
## http://hdf.ncsa.uiuc.edu/HDF5/doc/Copyright.html.  If you do not have
## access to either file, you may request a copy from hdfhelp@ncsa.uiuc.edu.
##
## HDF5-Fortran test/Makefile(.in)
##
top_srcdir=@top_srcdir@
top_builddir=../../..
srcdir=@srcdir@
@COMMENCE@

HDF_FORTRAN="yes"

hdf5_srcdir=$(top_srcdir)/src 
hdf5_builddir=$(top_builddir)/src
CPPFLAGS=-I. -I$(hdf5_builddir) -I$(hdf5_srcdir) @CPPFLAGS@
FSEARCH_DIRS=@F9XMODFLAG@../src @F9XMODFLAG@../../../fortran/src @FSEARCH_DIRS@

## Add include directory to the C preprocessor flags and the h5test and hdf5
## libraries to the library list.
## C hdf5
HDF5LIB=$(top_builddir)/src/libhdf5.la
## fortran hdf5
FLIB=$(top_builddir)/fortran/src/libhdf5_fortran.la
## C hl
HL_LIB=$(top_builddir)/hl/src/libhdf5_hl.la
## fortran hl
HL_FLIB=$(top_builddir)/hl/fortran/src/libhdf5hl_fortran.la


TCLIB=
LIB_CSRC=
LIB_FSRC=
LIB_OBJ=$(LIB_FSRC:.f90=.lo) $(LIB_CSRC:.c=.lo)

TEST_PROGS_SRC=tstlite.f90 tstimage.f90 tsttable.f90
TEST_PROGS=$(TEST_PROGS_SRC:.f90=)

# fortranlib_test settting
FORTLIBTEST_FSRC=
FORTLIBTEST_CSRC= 
FORTLIBTEST_OBJ=$(FORTLIBTEST_FSRC:.f90=.lo) $(FORTLIBTEST_CSRC:.c=.lo)

TEST_OBJ=$(FORTLIBTEST_OBJ) $(TEST_PROGS_SRC:.f90=.lo)

## Temporary files
MOSTLYCLEAN=*.h5 *.tmp

$(TEST_PROGS): $(LIB) $(FLIB) $(HL_LIB)  $(HL_FLIB)

tstlite: tstlite.lo 
	@$(LT_LINK_FEXE) $(FFLAGS) -o $@ tstlite.lo $(HL_LIB)  $(HL_FLIB)  $(FLIB) $(LIBS) $(HDF5LIB)

tstimage: tstimage.lo
	        @$(LT_LINK_FEXE) $(FFLAGS) -o $@ tstimage.lo $(HL_LIB) $(HL_FLIB) $(FLIB) $(LIBS) $(HDF5LIB)

tsttable: tsttable.lo
	        @$(LT_LINK_FEXE) $(FFLAGS) -o $@ tsttable.lo $(HL_LIB) $(HL_FLIB) $(FLIB) $(LIBS) $(HDF5LIB)



@CONCLUDE@
