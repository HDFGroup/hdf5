##
## Copyright by the Board of Trustees of the University of Illinois.
## All rights reserved.
##
## This file is part of HDF5.  The full HDF5 copyright notice, including
## terms governing use, modification, and redistribution, is contained in
## the files COPYING and Copyright.html.  COPYING can be found at the root
## of the source code distribution tree; Copyright.html can be found at the
## root level of an installed copy of the electronic HDF5 document set and
## is linked from the top-level documents page.  It can also be found at
## http://hdf.ncsa.uiuc.edu/HDF5/doc/Copyright.html.  If you do not have
## access to either file, you may request a copy from hdfhelp@ncsa.uiuc.edu.
##
## HDF5 Fortran Library Makefile(.in)
##
top_srcdir=@top_srcdir@
top_builddir=../../..
srcdir=@srcdir@
@COMMENCE@

HDF_FORTRAN="yes"

hdf5_srcdir=$(top_srcdir)/src
hdf5_builddir=$(top_builddir)/src
hl_dir=$(top_srcdir)/hl/src
TRACE=perl $(top_srcdir)/bin/trace

## Add `-I.' to the C preprocessor flags.
CPPFLAGS=-I. -I$(hdf5_builddir) -I$(hdf5_srcdir) -I$(srcdir) -I$(hl_dir)  @CPPFLAGS@
FSEARCH_DIRS=@F9XMODFLAG@../../../fortran/src @FSEARCH_DIRS@

## This is our main target
LIB=libhdf5hl_fortran.la

## C hl
HL_LIB=$(top_builddir)/hl/src/libhdf5_hl.la




## h5fc and libhdf5_fortran.settings are generated during configure. 
## Remove them only when distclean.
DISTCLEAN=

## Public header files (to be installed)...
PUB_HDR=
PUB_PROGS=

## Source and object files for the library
ADD_PARALLEL_FILES=

FPAR_MOD=${ADD_PARALLEL_FILES:yes=HDF5mpio.f90}

CPARALLEL=${ADD_PARALLEL_FILES:yes=H5FDmpiof.c}
CLIB_SRC=H5LTfc.c H5IMfc.c H5TBfc.c

FPARALLEL=${ADD_PARALLEL_FILES:yes=H5FDmpioff.f90}
FLIB_SRC=H5LTff.f90 H5IMff.f90 H5TBff.f90

LIB_SRC=$(CLIB_SRC) $(FLIB_SRC)
#LIB_OBJ=$(CLIB_SRC:.c=.lo) $(FLIB_SRC:.f90=.lo) 
LIB_OBJ=$(CLIB_SRC:.c=.lo) $(FLIB_SRC:.f90=.lo) $(HL_LIB)

## Hardcode the dependencies of these files. There isn't a known way of
## determining this automagically (like we do with the C files). So, when
## doing a parallel make, some modules could be made way before the
## modules they depend upon are actually made. *sigh*
H5LTff.lo:	    $(srcdir)/H5LTff.f90 
H5IMff.lo:          $(srcdir)/H5IMff.f90
H5TBff.lo:          $(srcdir)/H5TBff.f90	



ARFLAGS=rc

@CONCLUDE@
