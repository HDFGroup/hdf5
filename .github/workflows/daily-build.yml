name: hdf5 dev daily build

# Controls when the action will run. Triggers the workflow on a schedule
on:
  - push
  - workflow_dispatch
#  - schedule:
#    - cron: "6 0 * * *"

# A workflow run is made up of one or more jobs that can run sequentially or
# in parallel.
jobs:
  get-source:
    call-workflow-create-tarball:
      uses: ./.github/workflows/tarball.yml@v1

  uncompress-source:
    name: Run builds for all changes from the previous day
    runs-on: ubuntu-latest
    needs: get-source
    if: ${{ needs.get-source.outputs.has_changes == 'true' }}
    steps:

  run-ctest:
    call-workflow-create-tarball:
      uses: ./.github/workflows/cmake-ctest.yml@v1

