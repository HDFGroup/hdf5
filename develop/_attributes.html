<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.10.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>HDF5: Attributes</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
  $(function() { init_search(); });
/* @license-end */
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="hdf5doxy.css" rel="stylesheet" type="text/css">
<!-- <link href="hdf5doxy.css" rel="stylesheet" type="text/css"/>
 -->
<script type="text/javascript" src="hdf5_navtree_hacks.js"></script>
</head>
<body>
<div style="background:#FFDDDD;font-size:120%;text-align:center;margin:0;padding:5px">Please, help us to better serve our user community by answering the following short survey:  <a href="https://www.hdfgroup.org/website-survey/">https://www.hdfgroup.org/website-survey/</a></div>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="HDFG-logo.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname"><a href="https://www.hdfgroup.org">HDF5</a>
   &#160;<span id="projectnumber">1.15.0.7aed6ab</span>
   </div>
   <div id="projectbrief">API Reference</div>
  </td>
   <td>        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <span id="MSearchSelect"                onmouseover="return searchBox.OnSearchSelectShow()"                onmouseout="return searchBox.OnSearchSelectHide()">&#160;</span>
          <input type="text" id="MSearchField" value="" placeholder="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.svg" alt=""/></a>
          </span>
        </div>
</td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.10.0 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){initNavTree('_attributes.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title">Attributes</div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><h1><a class="anchor" id="secAttributes"></a>
Attributes</h1>
<h2><a class="anchor" id="CB_LargeAttributes"></a>
Creating "Large" HDF5 Attributes</h2>
<dl class="section user"><dt>Problem</dt><dd>You would like to use HDF5 attributes the size of whose values exceeds a few dozen kilobytes</dd></dl>
<dl class="section user"><dt>Solution</dt><dd>A file format change in the HDF5 1.8.x family of library releases made it possible to have attributes larger than about 64 KiB. Ensure that the lower library version bound for new HDF5 item creation is at least 1.8.x, and create larger attributes as usual.<br  />
In the example below, we create an attribute whose value occupies 4 MiB.</dd></dl>
<dl class="section note"><dt>Note</dt><dd>This feature is only supported in HDF5 1.8.x+</dd></dl>
<div class="fragment"><div class="line"><span class="lineno">   15</span>    {</div>
<div class="line"><span class="lineno">   16</span>        __label__ fail_attr, fail_aspace, fail_fapl, fail_file;</div>
<div class="line"><span class="lineno">   17</span>        <a class="code hl_typedef" href="_h5_ipublic_8h.html#a0045db7ff9c22ad35db6ae91662e1943">hid_t</a> fapl, file, aspace, attr;</div>
<div class="line"><span class="lineno">   18</span> </div>
<div class="line"><span class="lineno">   19</span>        <span class="keywordflow">if</span> ((fapl = <a class="code hl_function" href="group___p_l_c_r.html#gaf1b11da01d4d45d788c45f8bc5f0cbfa">H5Pcreate</a>(<a class="code hl_define" href="_h5_ppublic_8h.html#a60ec2d4334addfc0eda89614598ee38e">H5P_FILE_ACCESS</a>)) &lt; 0) {</div>
<div class="line"><span class="lineno">   20</span>            ret_val = EXIT_FAILURE;</div>
<div class="line"><span class="lineno">   21</span>            <span class="keywordflow">goto</span> fail_fapl;</div>
<div class="line"><span class="lineno">   22</span>        }</div>
<div class="line"><span class="lineno">   23</span><span class="preprocessor">#if H5_VERSION_GE(1, 10, 0)</span></div>
<div class="line"><span class="lineno">   24</span>        <span class="keywordflow">if</span> (<a class="code hl_function" href="group___f_a_p_l.html#gacbe1724e7f70cd17ed687417a1d2a910">H5Pset_libver_bounds</a>(fapl, <a class="code hl_enumvalue" href="_h5_fpublic_8h.html#a2d963b599894f684571fbd4d5e8a96a2a434ca8def77a117013577c8cec6af0d8">H5F_LIBVER_V18</a>, <a class="code hl_define" href="_h5_fpublic_8h.html#a47d050173da48a2b85c730446f0771c0">H5F_LIBVER_LATEST</a>) &lt; 0) {</div>
<div class="line"><span class="lineno">   25</span><span class="preprocessor">#elif H5_VERSION_GE(1, 8, 0)</span></div>
<div class="line"><span class="lineno">   26</span>        <span class="keywordflow">if</span> (<a class="code hl_function" href="group___f_a_p_l.html#gacbe1724e7f70cd17ed687417a1d2a910">H5Pset_libver_bounds</a>(fapl, <a class="code hl_define" href="_h5_fpublic_8h.html#a47d050173da48a2b85c730446f0771c0">H5F_LIBVER_LATEST</a>, <a class="code hl_define" href="_h5_fpublic_8h.html#a47d050173da48a2b85c730446f0771c0">H5F_LIBVER_LATEST</a>) &lt; 0) {</div>
<div class="line"><span class="lineno">   27</span><span class="preprocessor">#else</span></div>
<div class="line"><span class="lineno">   28</span><span class="preprocessor">#error Only HDF5 1.8.x and later supported.</span></div>
<div class="line"><span class="lineno">   29</span><span class="preprocessor">#endif</span></div>
<div class="line"><span class="lineno">   30</span>            ret_val = EXIT_FAILURE;</div>
<div class="line"><span class="lineno">   31</span>            <span class="keywordflow">goto</span> fail_file;</div>
<div class="line"><span class="lineno">   32</span>        }</div>
<div class="line"><span class="lineno">   33</span>        <span class="keywordflow">if</span> ((file = <a class="code hl_function" href="group___h5_f.html#gae64b51ee9ac0781bc4ccc599d98387f4">H5Fcreate</a>(<span class="stringliteral">&quot;large_attribute.h5&quot;</span>, <a class="code hl_define" href="_h5_fpublic_8h.html#a5a2d6726f9ad8d2bca8df2b817e5ad6a">H5F_ACC_TRUNC</a>, <a class="code hl_define" href="_h5_ppublic_8h.html#afa85e97bfbf9bf1c58e39263846c568f">H5P_DEFAULT</a>, fapl)) &lt; 0) {</div>
<div class="line"><span class="lineno">   34</span>            ret_val = EXIT_FAILURE;</div>
<div class="line"><span class="lineno">   35</span>            <span class="keywordflow">goto</span> fail_file;</div>
<div class="line"><span class="lineno">   36</span>        }</div>
<div class="line"><span class="lineno">   37</span> </div>
<div class="line"><span class="lineno">   38</span>        <span class="keywordflow">if</span> ((aspace = <a class="code hl_function" href="group___h5_s.html#ga8e35eea5738b4805856eac7d595254ae">H5Screate_simple</a>(1, (<a class="code hl_typedef" href="_h5public_8h.html#a7f81cce70fb546af88da24d9285d3c1c">hsize_t</a>[]){1024 * 1024}, NULL)) &lt; 0) {</div>
<div class="line"><span class="lineno">   39</span>            ret_val = EXIT_FAILURE;</div>
<div class="line"><span class="lineno">   40</span>            <span class="keywordflow">goto</span> fail_aspace;</div>
<div class="line"><span class="lineno">   41</span>        }</div>
<div class="line"><span class="lineno">   42</span>        <span class="keywordflow">if</span> ((attr = <a class="code hl_define" href="group___h5_a.html#ga4a76e4e5ab6eb0fd2aa7990d38d55f24">H5Acreate</a>(file, <span class="stringliteral">&quot;4MiB&quot;</span>, <a class="code hl_define" href="group___p_d_t_i_e_e_e.html#ga994ce9ffdd2c77a9352b102a883503ea">H5T_IEEE_F32LE</a>, aspace, <a class="code hl_define" href="_h5_ppublic_8h.html#afa85e97bfbf9bf1c58e39263846c568f">H5P_DEFAULT</a>, <a class="code hl_define" href="_h5_ppublic_8h.html#afa85e97bfbf9bf1c58e39263846c568f">H5P_DEFAULT</a>)) &lt; 0) {</div>
<div class="line"><span class="lineno">   43</span>            ret_val = EXIT_FAILURE;</div>
<div class="line"><span class="lineno">   44</span>            <span class="keywordflow">goto</span> fail_attr;</div>
<div class="line"><span class="lineno">   45</span>        }</div>
<div class="line"><span class="lineno">   46</span> </div>
<div class="line"><span class="lineno">   47</span>        <a class="code hl_function" href="group___h5_a.html#gaef4394b661e2c930879e9868e122bdda">H5Aclose</a>(attr);</div>
<div class="line"><span class="lineno">   48</span>fail_attr:</div>
<div class="line"><span class="lineno">   49</span>        <a class="code hl_function" href="group___h5_s.html#ga2b53128a39c8f104c1c9c2a91590fcc1">H5Sclose</a>(aspace);</div>
<div class="line"><span class="lineno">   50</span>fail_aspace:</div>
<div class="line"><span class="lineno">   51</span>        <a class="code hl_function" href="group___h5_f.html#gac55cd91d80822e4f8c2a7f04ea71b124">H5Fclose</a>(file);</div>
<div class="line"><span class="lineno">   52</span>fail_file:</div>
<div class="line"><span class="lineno">   53</span>        <a class="code hl_function" href="group___p_l_c_r.html#ga5dce61149211d3ef319452aa598887fb">H5Pclose</a>(fapl);</div>
<div class="line"><span class="lineno">   54</span>fail_fapl:;</div>
<div class="line"><span class="lineno">   55</span>    }</div>
</div><!-- fragment --><dl class="section user"><dt>Discussion</dt><dd>Large attributes are supported only in HDF5 versions 1.8.x and higher. This has implications for the accessibility of your HDF5 files and is your call.<br  />
Since there are no size limitations for large attributes, it might seem tempting to mistake them for dataset stand-ins. This is not the case, for at least two reasons:<ol type="1">
<li>Attributes decorate HDF5 objects, have their own local namespace, and can't be link targets.</li>
<li>Attribute I/O treats the attribute value as atomic, i.e., there is no support for partial I/O. A large attribute will always be read or written in its entirety.</li>
</ol>
</dd></dl>
<dl class="section user"><dt>See Also</dt><dd>See <a class="el" href="_accessibility.html#CB_MaintainCompat">Maintaining Compatibility with other HDF5 Library Versions</a> for HDF5 compatibility implications. </dd></dl>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.10.0 </li>
  </ul>
</div>
</body>
</html>
