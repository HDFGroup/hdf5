<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.7"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>HDF5: HDF5 References</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript">var page_layout=1;</script>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
  $(document).ready(function() { init_search(); });
/* @license-end */
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="hdf5doxy.css" rel="stylesheet" type="text/css"/>
<link href="doxygen-awesome.css" rel="stylesheet" type="text/css"/>
<link href="hdf5doxy.css" rel="stylesheet" type="text/css">
<script type="text/javascript" src="hdf5_navtree_hacks.js"></script>
<div style="background:#FFDDDD;font-size:120%;text-align:center;margin:0;padding:5px">Please, help us to better serve our user community by answering the following short survey:  <a href="https://www.hdfgroup.org/website-survey/">https://www.hdfgroup.org/website-survey/</a></div>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectlogo"><img alt="Logo" src="HDFG-logo.png"/></td>
  <td id="projectalign">
   <div id="projectname">HDF5<span id="projectnumber">&#160;1.17.0.e64e1ea</span>
   </div>
   <div id="projectbrief">API Reference</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.7 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="_getting_started.html"><span>Getting&#160;started</span></a></li>
      <li><a href="_u_g.html"><span>User&#160;Guide</span></a></li>
      <li><a href="_r_m.html"><span>Reference&#160;Manual</span></a></li>
      <li><a href="_cookbook.html"><span>Cookbook</span></a></li>
      <li><a href="_t_n.html"><span>Technical&#160;Notes</span></a></li>
      <li><a href="_r_f_c.html"><span>RFCs</span></a></li>
      <li><a href="_s_p_e_c.html"><span>Specifications</span></a></li>
      <li><a href="_g_l_s.html"><span>Glossary</span></a></li>
      <li><a href="_about.html"><span>About</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <span id="MSearchSelect"                onmouseover="return searchBox.OnSearchSelectShow()"                onmouseout="return searchBox.OnSearchSelectHide()">&#160;</span>
          <input type="text" id="MSearchField" value="" placeholder="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.svg" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('_h5_r__u_g.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title">HDF5 References</div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><h1><a class="anchor" id="sec_reference"></a>
HDF5 References</h1>
<p>HDF5 references allow users to reference existing HDF5 objects (file, group, dataset, named datatype, or attribute) as well as selections within datasets.</p>
<p>The original API, now deprecated, was extended in order to add the ability to reference attributes as well as objects in external files. Additionally, there were some inherent limitations within the older API that restricted its use with virtual object layer (VOL) connectors, which do not necessarily follow HDF5’s native file format.</p>
<p>The newer API introduced a single opaque reference type, which not only has the advantage of hiding the internal representation of references, but it also allows for future extensions to be added more seamlessly.</p>
<h2><a class="anchor" id="subsec_reference_intro"></a>
Introduction</h2>
<p>The deprecated HDF5 reference API only allowed users to create references to HDF5 objects (groups, datasets) and regions within a dataset. There were some limitations: it defined two separate reference types <a class="el" href="_h5_rpublic_8h.html#af1f69150fc8b3d6bf182da39dc0fe081">hobj_ref_t</a> and <a class="el" href="structhdset__reg__ref__t.html">hdset_reg_ref_t</a>; the former directly mapped to an <a class="el" href="_h5public_8h.html#a8c86e866f40d7167cf9a1934c72b856f">haddr_t</a> type that did not allow for external references, while the latter mapped to an HDF5 global heap entry, which was specific to native HDF5 and was created and written to the file when the reference was created. This prevented users from creating region references when the file is opened read-only, it was also not suitable for use outside of native HDF5 files. The newer API addressed these limitations by introducing a single abstract <a class="el" href="struct_h5_r__ref__t.html">H5R_ref_t</a> type as well as missing reference types such as attribute references and external references (i.e., references to objects in an external file).</p>
<h2><a class="anchor" id="subsec_reference_dep"></a>
Deprecated API</h2>
<p>There is no support for attribute references; references are only valid within the container that they reference; the size of the reference types are tied to the definition of an haddr_t or an entry in the file’s global heap, which only exists in native HDF5.</p>
<h3><a class="anchor" id="subsubsec_reference_limit"></a>
Limitations</h3>
<ul>
<li>The <a class="el" href="group___h5_r.html#ga0ac6997b5de26b11d91a95de2869950d" title="Creates a reference.">H5Rcreate</a> signature forces users to constantly pass (<a class="el" href="_h5_ipublic_8h.html#a01eab13dccc91afd6909d74dccb780ba">H5I_INVALID_HID</a>) as a space_id, in the case where the reference type is not a region reference. </li>
<li>The size of region references was defined as the size required to encode a global heap ID, this definition forces references to be written to the file at the time of their creation, hence preventing them to be created from a file that is opened read-only (e.g, when creating references to a file that one does not want to/cannot modify).</li>
</ul>
<h3><a class="anchor" id="subsubsec_reference_old_API"></a>
Deprecated Methods</h3>
<p>The original API before <a class="el" href="namespacehdf5.html">hdf5</a> 1.12.0 is defined below: </p><div class="fragment"><div class="line"><span class="comment">// Deprecated reference buffer sizes that are kept for backward compatibility</span></div>
<div class="line"><span class="preprocessor">#define H5R_OBJ_REF_BUF_SIZE      sizeof(haddr_t)</span></div>
<div class="line"><span class="preprocessor">#define H5R_DSET_REG_REF_BUF_SIZE (sizeof(haddr_t) + 4)</span></div>
<div class="line"> </div>
<div class="line"><span class="comment">// Reference types</span></div>
<div class="line"><span class="keyword">typedef</span> <span class="keyword">enum</span> <a class="code hl_enumeration" href="_h5_rpublic_8h.html#a7d148ddc165e65b01efabfd738ac056e">H5R_type_t</a> {</div>
<div class="line">    <a class="code hl_enumvalue" href="_h5_rpublic_8h.html#a7d148ddc165e65b01efabfd738ac056ea4fc6b2cf09334d77851f8b208105d58f">H5R_BADTYPE</a> = (-1), <span class="comment">// Invalid Reference Type</span></div>
<div class="line">    <a class="code hl_define" href="_h5_rpublic_8h.html#ae1ffa09875ca6778df3a577592dacbd2">H5R_OBJECT</a>,         <span class="comment">// Object reference</span></div>
<div class="line">    <a class="code hl_define" href="_h5_rpublic_8h.html#a2a28c48c03a4616a02f9157fca4b2df0">H5R_DATASET_REGION</a>, <span class="comment">// Dataset Region Reference</span></div>
<div class="line">    <a class="code hl_enumvalue" href="_h5_rpublic_8h.html#a7d148ddc165e65b01efabfd738ac056eaa89d43156d194e6538203cf7f4b6bda0">H5R_MAXTYPE</a>         <span class="comment">// Highest type (Invalid as true type)</span></div>
<div class="line">} <a class="code hl_enumeration" href="_h5_rpublic_8h.html#a7d148ddc165e65b01efabfd738ac056e">H5R_type_t</a>;</div>
<div class="line"> </div>
<div class="line"><span class="comment">// Object reference structure for user&#39;s code</span></div>
<div class="line"><span class="comment">// This needs to be large enough to store largest haddr_t on a worst case</span></div>
<div class="line"><span class="comment">// machine (8 bytes currently).</span></div>
<div class="line"><span class="keyword">typedef</span> <a class="code hl_typedef" href="_h5public_8h.html#a8c86e866f40d7167cf9a1934c72b856f">haddr_t</a> <a class="code hl_typedef" href="_h5_rpublic_8h.html#af1f69150fc8b3d6bf182da39dc0fe081">hobj_ref_t</a>;</div>
<div class="line"> </div>
<div class="line"><span class="comment">// Dataset Region reference structure for user&#39;s code</span></div>
<div class="line"><span class="comment">// (Buffer to store heap ID and index)</span></div>
<div class="line"><span class="comment">// This needs to be large enough to store largest haddr_t in a worst case</span></div>
<div class="line"><span class="comment">// machine (8 bytes currently) plus an int</span></div>
<div class="line"><span class="keyword">typedef</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> <a class="code hl_struct" href="structhdset__reg__ref__t.html">hdset_reg_ref_t</a>[<a class="code hl_define" href="_h5_rpublic_8h.html#af6fd702307b37ca58c21e2ca1c771415">H5R_DSET_REG_REF_BUF_SIZE</a>];</div>
<div class="line"> </div>
<div class="line"><span class="comment">// Prototypes</span></div>
<div class="line"><a class="code hl_typedef" href="_h5public_8h.html#a3b079ecf932a5c599499cf7e298af160">herr_t</a> <a class="code hl_function" href="group___h5_r.html#ga0ac6997b5de26b11d91a95de2869950d">H5Rcreate</a>(<span class="keywordtype">void</span> *ref, <a class="code hl_typedef" href="_h5_ipublic_8h.html#a0045db7ff9c22ad35db6ae91662e1943">hid_t</a> loc_id, <span class="keyword">const</span> <span class="keywordtype">char</span> *name, <a class="code hl_enumeration" href="_h5_rpublic_8h.html#a7d148ddc165e65b01efabfd738ac056e">H5R_type_t</a> ref_type, <a class="code hl_typedef" href="_h5_ipublic_8h.html#a0045db7ff9c22ad35db6ae91662e1943">hid_t</a> space_id);</div>
<div class="line"><a class="code hl_typedef" href="_h5_ipublic_8h.html#a0045db7ff9c22ad35db6ae91662e1943">hid_t</a> <a class="code hl_function" href="group___h5_r.html#ga9b09586f7b6ec708434dd8f95f58a9b7">H5Rdereference2</a>(<a class="code hl_typedef" href="_h5_ipublic_8h.html#a0045db7ff9c22ad35db6ae91662e1943">hid_t</a> obj_id, <a class="code hl_typedef" href="_h5_ipublic_8h.html#a0045db7ff9c22ad35db6ae91662e1943">hid_t</a> oapl_id, <a class="code hl_enumeration" href="_h5_rpublic_8h.html#a7d148ddc165e65b01efabfd738ac056e">H5R_type_t</a> ref_type, <span class="keyword">const</span> <span class="keywordtype">void</span> *ref);</div>
<div class="line"><a class="code hl_typedef" href="_h5_ipublic_8h.html#a0045db7ff9c22ad35db6ae91662e1943">hid_t</a> <a class="code hl_function" href="group___h5_r.html#ga1702d609e85b9edd3d1e526a0276484f">H5Rget_region</a>(<a class="code hl_typedef" href="_h5_ipublic_8h.html#a0045db7ff9c22ad35db6ae91662e1943">hid_t</a> dataset, <a class="code hl_enumeration" href="_h5_rpublic_8h.html#a7d148ddc165e65b01efabfd738ac056e">H5R_type_t</a> ref_type, <span class="keyword">const</span> <span class="keywordtype">void</span> *ref);</div>
<div class="line"><a class="code hl_typedef" href="_h5public_8h.html#a3b079ecf932a5c599499cf7e298af160">herr_t</a> <a class="code hl_function" href="group___h5_r.html#ga766e39a76bcdd68dc514425353eff807">H5Rget_obj_type2</a>(<a class="code hl_typedef" href="_h5_ipublic_8h.html#a0045db7ff9c22ad35db6ae91662e1943">hid_t</a> <span class="keywordtype">id</span>, <a class="code hl_enumeration" href="_h5_rpublic_8h.html#a7d148ddc165e65b01efabfd738ac056e">H5R_type_t</a> ref_type, <span class="keyword">const</span> <span class="keywordtype">void</span> *_ref, <a class="code hl_enumeration" href="_h5_opublic_8h.html#a929ff459574495f461657f6be804cdec">H5O_type_t</a> *obj_type);</div>
<div class="line"><a class="code hl_typedef" href="_h5public_8h.html#af629ed855824cf5955b54529adf78ad6">ssize_t</a> <a class="code hl_function" href="group___h5_r.html#ga4c112c388f697324270fd085100dccaa">H5Rget_name</a>(<a class="code hl_typedef" href="_h5_ipublic_8h.html#a0045db7ff9c22ad35db6ae91662e1943">hid_t</a> loc_id, <a class="code hl_enumeration" href="_h5_rpublic_8h.html#a7d148ddc165e65b01efabfd738ac056e">H5R_type_t</a> ref_type, <span class="keyword">const</span> <span class="keywordtype">void</span> *ref, <span class="keywordtype">char</span> *name , <span class="keywordtype">size_t</span> size);</div>
<div class="ttc" id="a_h5_ipublic_8h_html_a0045db7ff9c22ad35db6ae91662e1943"><div class="ttname"><a href="_h5_ipublic_8h.html#a0045db7ff9c22ad35db6ae91662e1943">hid_t</a></div><div class="ttdeci">int64_t hid_t</div><div class="ttdef"><b>Definition</b> H5Ipublic.h:60</div></div>
<div class="ttc" id="a_h5_opublic_8h_html_a929ff459574495f461657f6be804cdec"><div class="ttname"><a href="_h5_opublic_8h.html#a929ff459574495f461657f6be804cdec">H5O_type_t</a></div><div class="ttdeci">H5O_type_t</div><div class="ttdef"><b>Definition</b> H5Opublic.h:107</div></div>
<div class="ttc" id="a_h5_rpublic_8h_html_a2a28c48c03a4616a02f9157fca4b2df0"><div class="ttname"><a href="_h5_rpublic_8h.html#a2a28c48c03a4616a02f9157fca4b2df0">H5R_DATASET_REGION</a></div><div class="ttdeci">#define H5R_DATASET_REGION</div><div class="ttdef"><b>Definition</b> H5Rpublic.h:625</div></div>
<div class="ttc" id="a_h5_rpublic_8h_html_a7d148ddc165e65b01efabfd738ac056e"><div class="ttname"><a href="_h5_rpublic_8h.html#a7d148ddc165e65b01efabfd738ac056e">H5R_type_t</a></div><div class="ttdeci">H5R_type_t</div><div class="ttdef"><b>Definition</b> H5Rpublic.h:51</div></div>
<div class="ttc" id="a_h5_rpublic_8h_html_a7d148ddc165e65b01efabfd738ac056ea4fc6b2cf09334d77851f8b208105d58f"><div class="ttname"><a href="_h5_rpublic_8h.html#a7d148ddc165e65b01efabfd738ac056ea4fc6b2cf09334d77851f8b208105d58f">H5R_BADTYPE</a></div><div class="ttdeci">@ H5R_BADTYPE</div><div class="ttdef"><b>Definition</b> H5Rpublic.h:52</div></div>
<div class="ttc" id="a_h5_rpublic_8h_html_a7d148ddc165e65b01efabfd738ac056eaa89d43156d194e6538203cf7f4b6bda0"><div class="ttname"><a href="_h5_rpublic_8h.html#a7d148ddc165e65b01efabfd738ac056eaa89d43156d194e6538203cf7f4b6bda0">H5R_MAXTYPE</a></div><div class="ttdeci">@ H5R_MAXTYPE</div><div class="ttdef"><b>Definition</b> H5Rpublic.h:58</div></div>
<div class="ttc" id="a_h5_rpublic_8h_html_ae1ffa09875ca6778df3a577592dacbd2"><div class="ttname"><a href="_h5_rpublic_8h.html#ae1ffa09875ca6778df3a577592dacbd2">H5R_OBJECT</a></div><div class="ttdeci">#define H5R_OBJECT</div><div class="ttdef"><b>Definition</b> H5Rpublic.h:624</div></div>
<div class="ttc" id="a_h5_rpublic_8h_html_af1f69150fc8b3d6bf182da39dc0fe081"><div class="ttname"><a href="_h5_rpublic_8h.html#af1f69150fc8b3d6bf182da39dc0fe081">hobj_ref_t</a></div><div class="ttdeci">haddr_t hobj_ref_t</div><div class="ttdef"><b>Definition</b> H5Rpublic.h:71</div></div>
<div class="ttc" id="a_h5_rpublic_8h_html_af6fd702307b37ca58c21e2ca1c771415"><div class="ttname"><a href="_h5_rpublic_8h.html#af6fd702307b37ca58c21e2ca1c771415">H5R_DSET_REG_REF_BUF_SIZE</a></div><div class="ttdeci">#define H5R_DSET_REG_REF_BUF_SIZE</div><div class="ttdef"><b>Definition</b> H5Rpublic.h:30</div></div>
<div class="ttc" id="a_h5public_8h_html_a3b079ecf932a5c599499cf7e298af160"><div class="ttname"><a href="_h5public_8h.html#a3b079ecf932a5c599499cf7e298af160">herr_t</a></div><div class="ttdeci">int herr_t</div><div class="ttdef"><b>Definition</b> H5public.h:239</div></div>
<div class="ttc" id="a_h5public_8h_html_a8c86e866f40d7167cf9a1934c72b856f"><div class="ttname"><a href="_h5public_8h.html#a8c86e866f40d7167cf9a1934c72b856f">haddr_t</a></div><div class="ttdeci">uint64_t haddr_t</div><div class="ttdef"><b>Definition</b> H5public.h:345</div></div>
<div class="ttc" id="a_h5public_8h_html_af629ed855824cf5955b54529adf78ad6"><div class="ttname"><a href="_h5public_8h.html#af629ed855824cf5955b54529adf78ad6">ssize_t</a></div><div class="ttdeci">int ssize_t</div><div class="ttdef"><b>Definition</b> H5public.h:283</div></div>
<div class="ttc" id="agroup___h5_r_html_ga0ac6997b5de26b11d91a95de2869950d"><div class="ttname"><a href="group___h5_r.html#ga0ac6997b5de26b11d91a95de2869950d">H5Rcreate</a></div><div class="ttdeci">herr_t H5Rcreate(void *ref, hid_t loc_id, const char *name, H5R_type_t ref_type, hid_t space_id)</div><div class="ttdoc">Creates a reference.</div></div>
<div class="ttc" id="agroup___h5_r_html_ga1702d609e85b9edd3d1e526a0276484f"><div class="ttname"><a href="group___h5_r.html#ga1702d609e85b9edd3d1e526a0276484f">H5Rget_region</a></div><div class="ttdeci">hid_t H5Rget_region(hid_t dataset, H5R_type_t ref_type, const void *ref)</div><div class="ttdoc">Sets up a dataspace and selection as specified by a region reference.</div></div>
<div class="ttc" id="agroup___h5_r_html_ga4c112c388f697324270fd085100dccaa"><div class="ttname"><a href="group___h5_r.html#ga4c112c388f697324270fd085100dccaa">H5Rget_name</a></div><div class="ttdeci">ssize_t H5Rget_name(hid_t loc_id, H5R_type_t ref_type, const void *ref, char *name, size_t size)</div><div class="ttdoc">Retrieves a name for a referenced object.</div></div>
<div class="ttc" id="agroup___h5_r_html_ga766e39a76bcdd68dc514425353eff807"><div class="ttname"><a href="group___h5_r.html#ga766e39a76bcdd68dc514425353eff807">H5Rget_obj_type2</a></div><div class="ttdeci">herr_t H5Rget_obj_type2(hid_t id, H5R_type_t ref_type, const void *ref, H5O_type_t *obj_type)</div><div class="ttdoc">Retrieves the type of object that an object reference points to.</div></div>
<div class="ttc" id="agroup___h5_r_html_ga9b09586f7b6ec708434dd8f95f58a9b7"><div class="ttname"><a href="group___h5_r.html#ga9b09586f7b6ec708434dd8f95f58a9b7">H5Rdereference2</a></div><div class="ttdeci">hid_t H5Rdereference2(hid_t obj_id, hid_t oapl_id, H5R_type_t ref_type, const void *ref)</div><div class="ttdoc">Opens the HDF5 object referenced.</div></div>
<div class="ttc" id="astructhdset__reg__ref__t_html"><div class="ttname"><a href="structhdset__reg__ref__t.html">hdset_reg_ref_t</a></div><div class="ttdef"><b>Definition</b> H5Rpublic.h:86</div></div>
</div><!-- fragment --><h2><a class="anchor" id="subsec_reference_new"></a>
New API</h2>
<p>The current API is defined below: </p><div class="fragment"><div class="line"><span class="comment">// Deprecated reference buffer sizes that are kept for backward compatibility</span></div>
<div class="line"><span class="preprocessor">#define H5R_OBJ_REF_BUF_SIZE      sizeof(haddr_t)</span></div>
<div class="line"><span class="preprocessor">#define H5R_DSET_REG_REF_BUF_SIZE (sizeof(haddr_t) + 4)</span></div>
<div class="line"> </div>
<div class="line"><span class="comment">// Default reference buffer size.</span></div>
<div class="line"><span class="preprocessor">#define H5R_REF_BUF_SIZE (64)</span></div>
<div class="line"> </div>
<div class="line"><span class="comment">// Reference types allowed.</span></div>
<div class="line"><span class="keyword">typedef</span> <span class="keyword">enum</span> {</div>
<div class="line">    <a class="code hl_enumvalue" href="_h5_rpublic_8h.html#a7d148ddc165e65b01efabfd738ac056ea4fc6b2cf09334d77851f8b208105d58f">H5R_BADTYPE</a>         = (-1), <span class="comment">// Invalid reference type</span></div>
<div class="line">    <a class="code hl_enumvalue" href="_h5_rpublic_8h.html#a7d148ddc165e65b01efabfd738ac056eae218034c065fc240fab1b2c709b7e23c">H5R_OBJECT1</a>         = 0,    <span class="comment">// Backward compatibility (object)</span></div>
<div class="line">    <a class="code hl_enumvalue" href="_h5_rpublic_8h.html#a7d148ddc165e65b01efabfd738ac056eac9d8cfad097bec7d118333303f67c916">H5R_DATASET_REGION1</a> = 1,    <span class="comment">// Backward compatibility (region)</span></div>
<div class="line">    <a class="code hl_enumvalue" href="_h5_rpublic_8h.html#a7d148ddc165e65b01efabfd738ac056ea58376ddd57d594982e0034a3ca2e5bad">H5R_OBJECT2</a>         = 2,    <span class="comment">// Object reference</span></div>
<div class="line">    <a class="code hl_enumvalue" href="_h5_rpublic_8h.html#a7d148ddc165e65b01efabfd738ac056ea2099d2dee8001ab3ce2e7041af5c93d6">H5R_DATASET_REGION2</a> = 3,    <span class="comment">// Region reference</span></div>
<div class="line">    <a class="code hl_enumvalue" href="_h5_rpublic_8h.html#a7d148ddc165e65b01efabfd738ac056eae63b3cfa3688767f46335fad6db981a5">H5R_ATTR</a>            = 4,    <span class="comment">// Attribute Reference</span></div>
<div class="line">    <a class="code hl_enumvalue" href="_h5_rpublic_8h.html#a7d148ddc165e65b01efabfd738ac056eaa89d43156d194e6538203cf7f4b6bda0">H5R_MAXTYPE</a>         = 5     <span class="comment">// Highest type (invalid)</span></div>
<div class="line">} <a class="code hl_enumeration" href="_h5_rpublic_8h.html#a7d148ddc165e65b01efabfd738ac056e">H5R_type_t</a>;</div>
<div class="line"> </div>
<div class="line"><span class="comment">// Deprecated object reference type that is used with deprecated reference APIs.</span></div>
<div class="line"><span class="comment">// This type can only be used with the &quot;native&quot; HDF5 VOL connector.</span></div>
<div class="line"><span class="keyword">typedef</span> <a class="code hl_typedef" href="_h5public_8h.html#a8c86e866f40d7167cf9a1934c72b856f">haddr_t</a> <a class="code hl_typedef" href="_h5_rpublic_8h.html#af1f69150fc8b3d6bf182da39dc0fe081">hobj_ref_t</a>;</div>
<div class="line"> </div>
<div class="line"><span class="comment">// Deprecated dataset region reference type that is used with deprecated reference APIs.</span></div>
<div class="line"><span class="comment">// This type can only be used with the &quot;native&quot; HDF5 VOL connector.</span></div>
<div class="line"><span class="keyword">typedef</span> <span class="keyword">struct </span>{</div>
<div class="line">    uint8_t __data[<a class="code hl_define" href="_h5_rpublic_8h.html#af6fd702307b37ca58c21e2ca1c771415">H5R_DSET_REG_REF_BUF_SIZE</a>];</div>
<div class="line">} <a class="code hl_struct" href="structhdset__reg__ref__t.html">hdset_reg_ref_t</a>;</div>
<div class="line"> </div>
<div class="line"><span class="comment">// Opaque reference type. The same reference type is used for object,</span></div>
<div class="line"><span class="comment">// dataset region and attribute references. This is the type that</span></div>
<div class="line"><span class="comment">// should always be used with the current reference API.</span></div>
<div class="line"><span class="keyword">typedef</span> <span class="keyword">struct </span>{</div>
<div class="line">    <span class="keyword">union </span>{</div>
<div class="line">        uint8_t __data[<a class="code hl_define" href="_h5_rpublic_8h.html#a30e65b87f330f177dc5ae434104af580">H5R_REF_BUF_SIZE</a>]; <span class="comment">// opaque data</span></div>
<div class="line">        int64_t align;                    <span class="comment">// ensures alignment</span></div>
<div class="line">    } u;</div>
<div class="line">} <a class="code hl_struct" href="struct_h5_r__ref__t.html">H5R_ref_t</a>;</div>
<div class="line"> </div>
<div class="line"><span class="comment">// Constructors</span></div>
<div class="line"><a class="code hl_typedef" href="_h5public_8h.html#a3b079ecf932a5c599499cf7e298af160">herr_t</a> <a class="code hl_function" href="group___h5_r.html#gad0fb6ec99ecefa602756a5682addfc69">H5Rcreate_object</a>(<a class="code hl_typedef" href="_h5_ipublic_8h.html#a0045db7ff9c22ad35db6ae91662e1943">hid_t</a> loc_id, <span class="keyword">const</span> <span class="keywordtype">char</span> *name, <a class="code hl_struct" href="struct_h5_r__ref__t.html">H5R_ref_t</a> *ref_ptr);</div>
<div class="line"><a class="code hl_typedef" href="_h5public_8h.html#a3b079ecf932a5c599499cf7e298af160">herr_t</a> <a class="code hl_function" href="group___h5_r.html#ga60134eb917afbe89aa23eb25a30d249b">H5Rcreate_region</a>(<a class="code hl_typedef" href="_h5_ipublic_8h.html#a0045db7ff9c22ad35db6ae91662e1943">hid_t</a> loc_id, <span class="keyword">const</span> <span class="keywordtype">char</span> *name, <a class="code hl_typedef" href="_h5_ipublic_8h.html#a0045db7ff9c22ad35db6ae91662e1943">hid_t</a> space_id, <a class="code hl_struct" href="struct_h5_r__ref__t.html">H5R_ref_t</a> *ref_ptr);</div>
<div class="line"><a class="code hl_typedef" href="_h5public_8h.html#a3b079ecf932a5c599499cf7e298af160">herr_t</a> <a class="code hl_function" href="group___h5_r.html#gacae1bf2263befeac54d81f27995721f8">H5Rcreate_attr</a>(<a class="code hl_typedef" href="_h5_ipublic_8h.html#a0045db7ff9c22ad35db6ae91662e1943">hid_t</a> loc_id, <span class="keyword">const</span> <span class="keywordtype">char</span> *name, <span class="keyword">const</span> <span class="keywordtype">char</span> *attr_name, <a class="code hl_struct" href="struct_h5_r__ref__t.html">H5R_ref_t</a> *ref_ptr);</div>
<div class="line"><a class="code hl_typedef" href="_h5public_8h.html#a3b079ecf932a5c599499cf7e298af160">herr_t</a> <a class="code hl_function" href="group___h5_r.html#ga026114e6c23588bf89bb473eb9e4d095">H5Rdestroy</a>(<a class="code hl_struct" href="struct_h5_r__ref__t.html">H5R_ref_t</a> *ref_ptr);</div>
<div class="line"> </div>
<div class="line"><span class="comment">// Info</span></div>
<div class="line"><a class="code hl_enumeration" href="_h5_rpublic_8h.html#a7d148ddc165e65b01efabfd738ac056e">H5R_type_t</a> <a class="code hl_function" href="group___h5_r.html#ga56989d33835ec289269d366dc28aa4ad">H5Rget_type</a>(<span class="keyword">const</span> <a class="code hl_struct" href="struct_h5_r__ref__t.html">H5R_ref_t</a> *ref_ptr);</div>
<div class="line"><a class="code hl_typedef" href="_h5public_8h.html#aa8f6c28736dbd0f18388c67911d38aca">htri_t</a> <a class="code hl_function" href="group___h5_r.html#ga8d7dac2c604356f2fc657f36a201aea0">H5Requal</a>(<span class="keyword">const</span> <a class="code hl_struct" href="struct_h5_r__ref__t.html">H5R_ref_t</a> *ref1_ptr, <span class="keyword">const</span> <a class="code hl_struct" href="struct_h5_r__ref__t.html">H5R_ref_t</a> *ref2_ptr);</div>
<div class="line"><a class="code hl_typedef" href="_h5public_8h.html#a3b079ecf932a5c599499cf7e298af160">herr_t</a> <a class="code hl_function" href="group___h5_r.html#gad5b7b117cfaea90d1e4786304c58c55c">H5Rcopy</a>(<span class="keyword">const</span> <a class="code hl_struct" href="struct_h5_r__ref__t.html">H5R_ref_t</a> *src_ref_ptr, <a class="code hl_struct" href="struct_h5_r__ref__t.html">H5R_ref_t</a> *dst_ref_ptr);</div>
<div class="line"> </div>
<div class="line"><span class="comment">// Dereference</span></div>
<div class="line"><a class="code hl_typedef" href="_h5_ipublic_8h.html#a0045db7ff9c22ad35db6ae91662e1943">hid_t</a> <a class="code hl_function" href="group___h5_r.html#gaa6692bd3a5b490c8db05b90a5888d0dd">H5Ropen_object</a>(<span class="keyword">const</span> <a class="code hl_struct" href="struct_h5_r__ref__t.html">H5R_ref_t</a> *ref_ptr, <a class="code hl_typedef" href="_h5_ipublic_8h.html#a0045db7ff9c22ad35db6ae91662e1943">hid_t</a> rapl_id, <a class="code hl_typedef" href="_h5_ipublic_8h.html#a0045db7ff9c22ad35db6ae91662e1943">hid_t</a> oapl_id);</div>
<div class="line"><a class="code hl_typedef" href="_h5_ipublic_8h.html#a0045db7ff9c22ad35db6ae91662e1943">hid_t</a> <a class="code hl_function" href="group___h5_r.html#ga400154b014acd1736bae9a127f4e9a1a">H5Ropen_region</a>(<span class="keyword">const</span> <a class="code hl_struct" href="struct_h5_r__ref__t.html">H5R_ref_t</a> *ref_ptr, <a class="code hl_typedef" href="_h5_ipublic_8h.html#a0045db7ff9c22ad35db6ae91662e1943">hid_t</a> rapl_id, <a class="code hl_typedef" href="_h5_ipublic_8h.html#a0045db7ff9c22ad35db6ae91662e1943">hid_t</a> oapl_id);</div>
<div class="line"><a class="code hl_typedef" href="_h5_ipublic_8h.html#a0045db7ff9c22ad35db6ae91662e1943">hid_t</a> <a class="code hl_function" href="group___h5_r.html#ga2a00d73b9a13b9069d0ad39225dd9f71">H5Ropen_attr</a>(<span class="keyword">const</span> <a class="code hl_struct" href="struct_h5_r__ref__t.html">H5R_ref_t</a> *ref_ptr, <a class="code hl_typedef" href="_h5_ipublic_8h.html#a0045db7ff9c22ad35db6ae91662e1943">hid_t</a> rapl_id, <a class="code hl_typedef" href="_h5_ipublic_8h.html#a0045db7ff9c22ad35db6ae91662e1943">hid_t</a> aapl_id);</div>
<div class="line"> </div>
<div class="line"><span class="comment">// Get type</span></div>
<div class="line"><a class="code hl_typedef" href="_h5public_8h.html#a3b079ecf932a5c599499cf7e298af160">herr_t</a> <a class="code hl_function" href="group___h5_r.html#ga6fb098a1a4c9369d76dbeeaf40d6d2af">H5Rget_obj_type3</a>(<span class="keyword">const</span> <a class="code hl_struct" href="struct_h5_r__ref__t.html">H5R_ref_t</a> *ref_ptr, <a class="code hl_typedef" href="_h5_ipublic_8h.html#a0045db7ff9c22ad35db6ae91662e1943">hid_t</a> rapl_id, <a class="code hl_enumeration" href="_h5_opublic_8h.html#a929ff459574495f461657f6be804cdec">H5O_type_t</a> *obj_type);</div>
<div class="line"> </div>
<div class="line"><span class="comment">// Get name</span></div>
<div class="line"><a class="code hl_typedef" href="_h5public_8h.html#af629ed855824cf5955b54529adf78ad6">ssize_t</a> <a class="code hl_function" href="group___h5_r.html#ga659d950e37122a59d50612b407a48900">H5Rget_file_name</a>(<span class="keyword">const</span> <a class="code hl_struct" href="struct_h5_r__ref__t.html">H5R_ref_t</a> *ref_ptr, <span class="keywordtype">char</span> *name, <span class="keywordtype">size_t</span> size);</div>
<div class="line"><a class="code hl_typedef" href="_h5public_8h.html#af629ed855824cf5955b54529adf78ad6">ssize_t</a> <a class="code hl_function" href="group___h5_r.html#gac5a0a3a874cd3c4dc630579521539bb6">H5Rget_obj_name</a>(<span class="keyword">const</span> <a class="code hl_struct" href="struct_h5_r__ref__t.html">H5R_ref_t</a> *ref_ptr, <a class="code hl_typedef" href="_h5_ipublic_8h.html#a0045db7ff9c22ad35db6ae91662e1943">hid_t</a> rapl_id, <span class="keywordtype">char</span> *name, <span class="keywordtype">size_t</span> size);</div>
<div class="line"><a class="code hl_typedef" href="_h5public_8h.html#af629ed855824cf5955b54529adf78ad6">ssize_t</a> <a class="code hl_function" href="group___h5_r.html#gaf9c6823346cc34f02b9f5d11e56344a0">H5Rget_attr_name</a>(<span class="keyword">const</span> <a class="code hl_struct" href="struct_h5_r__ref__t.html">H5R_ref_t</a> *ref_ptr, <span class="keywordtype">char</span> *name, <span class="keywordtype">size_t</span> size);</div>
<div class="ttc" id="a_h5_rpublic_8h_html_a30e65b87f330f177dc5ae434104af580"><div class="ttname"><a href="_h5_rpublic_8h.html#a30e65b87f330f177dc5ae434104af580">H5R_REF_BUF_SIZE</a></div><div class="ttdeci">#define H5R_REF_BUF_SIZE</div><div class="ttdef"><b>Definition</b> H5Rpublic.h:38</div></div>
<div class="ttc" id="a_h5_rpublic_8h_html_a7d148ddc165e65b01efabfd738ac056ea2099d2dee8001ab3ce2e7041af5c93d6"><div class="ttname"><a href="_h5_rpublic_8h.html#a7d148ddc165e65b01efabfd738ac056ea2099d2dee8001ab3ce2e7041af5c93d6">H5R_DATASET_REGION2</a></div><div class="ttdeci">@ H5R_DATASET_REGION2</div><div class="ttdef"><b>Definition</b> H5Rpublic.h:56</div></div>
<div class="ttc" id="a_h5_rpublic_8h_html_a7d148ddc165e65b01efabfd738ac056ea58376ddd57d594982e0034a3ca2e5bad"><div class="ttname"><a href="_h5_rpublic_8h.html#a7d148ddc165e65b01efabfd738ac056ea58376ddd57d594982e0034a3ca2e5bad">H5R_OBJECT2</a></div><div class="ttdeci">@ H5R_OBJECT2</div><div class="ttdef"><b>Definition</b> H5Rpublic.h:55</div></div>
<div class="ttc" id="a_h5_rpublic_8h_html_a7d148ddc165e65b01efabfd738ac056eac9d8cfad097bec7d118333303f67c916"><div class="ttname"><a href="_h5_rpublic_8h.html#a7d148ddc165e65b01efabfd738ac056eac9d8cfad097bec7d118333303f67c916">H5R_DATASET_REGION1</a></div><div class="ttdeci">@ H5R_DATASET_REGION1</div><div class="ttdef"><b>Definition</b> H5Rpublic.h:54</div></div>
<div class="ttc" id="a_h5_rpublic_8h_html_a7d148ddc165e65b01efabfd738ac056eae218034c065fc240fab1b2c709b7e23c"><div class="ttname"><a href="_h5_rpublic_8h.html#a7d148ddc165e65b01efabfd738ac056eae218034c065fc240fab1b2c709b7e23c">H5R_OBJECT1</a></div><div class="ttdeci">@ H5R_OBJECT1</div><div class="ttdef"><b>Definition</b> H5Rpublic.h:53</div></div>
<div class="ttc" id="a_h5_rpublic_8h_html_a7d148ddc165e65b01efabfd738ac056eae63b3cfa3688767f46335fad6db981a5"><div class="ttname"><a href="_h5_rpublic_8h.html#a7d148ddc165e65b01efabfd738ac056eae63b3cfa3688767f46335fad6db981a5">H5R_ATTR</a></div><div class="ttdeci">@ H5R_ATTR</div><div class="ttdef"><b>Definition</b> H5Rpublic.h:57</div></div>
<div class="ttc" id="a_h5public_8h_html_aa8f6c28736dbd0f18388c67911d38aca"><div class="ttname"><a href="_h5public_8h.html#aa8f6c28736dbd0f18388c67911d38aca">htri_t</a></div><div class="ttdeci">int htri_t</div><div class="ttdef"><b>Definition</b> H5public.h:269</div></div>
<div class="ttc" id="agroup___h5_r_html_ga026114e6c23588bf89bb473eb9e4d095"><div class="ttname"><a href="group___h5_r.html#ga026114e6c23588bf89bb473eb9e4d095">H5Rdestroy</a></div><div class="ttdeci">herr_t H5Rdestroy(H5R_ref_t *ref_ptr)</div><div class="ttdoc">Closes a reference.</div></div>
<div class="ttc" id="agroup___h5_r_html_ga2a00d73b9a13b9069d0ad39225dd9f71"><div class="ttname"><a href="group___h5_r.html#ga2a00d73b9a13b9069d0ad39225dd9f71">H5Ropen_attr</a></div><div class="ttdeci">hid_t H5Ropen_attr(H5R_ref_t *ref_ptr, hid_t rapl_id, hid_t aapl_id)</div><div class="ttdoc">Opens the HDF5 attribute referenced.</div></div>
<div class="ttc" id="agroup___h5_r_html_ga400154b014acd1736bae9a127f4e9a1a"><div class="ttname"><a href="group___h5_r.html#ga400154b014acd1736bae9a127f4e9a1a">H5Ropen_region</a></div><div class="ttdeci">hid_t H5Ropen_region(H5R_ref_t *ref_ptr, hid_t rapl_id, hid_t oapl_id)</div><div class="ttdoc">Sets up a dataspace and selection as specified by a region reference.</div></div>
<div class="ttc" id="agroup___h5_r_html_ga56989d33835ec289269d366dc28aa4ad"><div class="ttname"><a href="group___h5_r.html#ga56989d33835ec289269d366dc28aa4ad">H5Rget_type</a></div><div class="ttdeci">H5R_type_t H5Rget_type(const H5R_ref_t *ref_ptr)</div><div class="ttdoc">Retrieves the type of a reference.</div></div>
<div class="ttc" id="agroup___h5_r_html_ga60134eb917afbe89aa23eb25a30d249b"><div class="ttname"><a href="group___h5_r.html#ga60134eb917afbe89aa23eb25a30d249b">H5Rcreate_region</a></div><div class="ttdeci">herr_t H5Rcreate_region(hid_t loc_id, const char *name, hid_t space_id, hid_t oapl_id, H5R_ref_t *ref_ptr)</div><div class="ttdoc">Creates a region reference.</div></div>
<div class="ttc" id="agroup___h5_r_html_ga659d950e37122a59d50612b407a48900"><div class="ttname"><a href="group___h5_r.html#ga659d950e37122a59d50612b407a48900">H5Rget_file_name</a></div><div class="ttdeci">ssize_t H5Rget_file_name(const H5R_ref_t *ref_ptr, char *name, size_t size)</div><div class="ttdoc">Retrieves the file name for a referenced object.</div></div>
<div class="ttc" id="agroup___h5_r_html_ga6fb098a1a4c9369d76dbeeaf40d6d2af"><div class="ttname"><a href="group___h5_r.html#ga6fb098a1a4c9369d76dbeeaf40d6d2af">H5Rget_obj_type3</a></div><div class="ttdeci">herr_t H5Rget_obj_type3(H5R_ref_t *ref_ptr, hid_t rapl_id, H5O_type_t *obj_type)</div><div class="ttdoc">Retrieves the type of object that an object reference points to.</div></div>
<div class="ttc" id="agroup___h5_r_html_ga8d7dac2c604356f2fc657f36a201aea0"><div class="ttname"><a href="group___h5_r.html#ga8d7dac2c604356f2fc657f36a201aea0">H5Requal</a></div><div class="ttdeci">htri_t H5Requal(const H5R_ref_t *ref1_ptr, const H5R_ref_t *ref2_ptr)</div><div class="ttdoc">Determines whether two references are equal.</div></div>
<div class="ttc" id="agroup___h5_r_html_gaa6692bd3a5b490c8db05b90a5888d0dd"><div class="ttname"><a href="group___h5_r.html#gaa6692bd3a5b490c8db05b90a5888d0dd">H5Ropen_object</a></div><div class="ttdeci">hid_t H5Ropen_object(H5R_ref_t *ref_ptr, hid_t rapl_id, hid_t oapl_id)</div><div class="ttdoc">Opens the HDF5 object referenced.</div></div>
<div class="ttc" id="agroup___h5_r_html_gac5a0a3a874cd3c4dc630579521539bb6"><div class="ttname"><a href="group___h5_r.html#gac5a0a3a874cd3c4dc630579521539bb6">H5Rget_obj_name</a></div><div class="ttdeci">ssize_t H5Rget_obj_name(H5R_ref_t *ref_ptr, hid_t rapl_id, char *name, size_t size)</div><div class="ttdoc">Retrieves the object name for a referenced object.</div></div>
<div class="ttc" id="agroup___h5_r_html_gacae1bf2263befeac54d81f27995721f8"><div class="ttname"><a href="group___h5_r.html#gacae1bf2263befeac54d81f27995721f8">H5Rcreate_attr</a></div><div class="ttdeci">herr_t H5Rcreate_attr(hid_t loc_id, const char *name, const char *attr_name, hid_t oapl_id, H5R_ref_t *ref_ptr)</div><div class="ttdoc">Creates an attribute reference.</div></div>
<div class="ttc" id="agroup___h5_r_html_gad0fb6ec99ecefa602756a5682addfc69"><div class="ttname"><a href="group___h5_r.html#gad0fb6ec99ecefa602756a5682addfc69">H5Rcreate_object</a></div><div class="ttdeci">herr_t H5Rcreate_object(hid_t loc_id, const char *name, hid_t oapl_id, H5R_ref_t *ref_ptr)</div><div class="ttdoc">Creates an object reference.</div></div>
<div class="ttc" id="agroup___h5_r_html_gad5b7b117cfaea90d1e4786304c58c55c"><div class="ttname"><a href="group___h5_r.html#gad5b7b117cfaea90d1e4786304c58c55c">H5Rcopy</a></div><div class="ttdeci">herr_t H5Rcopy(const H5R_ref_t *src_ref_ptr, H5R_ref_t *dst_ref_ptr)</div><div class="ttdoc">Copies an existing reference.</div></div>
<div class="ttc" id="agroup___h5_r_html_gaf9c6823346cc34f02b9f5d11e56344a0"><div class="ttname"><a href="group___h5_r.html#gaf9c6823346cc34f02b9f5d11e56344a0">H5Rget_attr_name</a></div><div class="ttdeci">ssize_t H5Rget_attr_name(const H5R_ref_t *ref_ptr, char *name, size_t size)</div><div class="ttdoc">Retrieves the attribute name for a referenced object.</div></div>
<div class="ttc" id="astruct_h5_r__ref__t_html"><div class="ttname"><a href="struct_h5_r__ref__t.html">H5R_ref_t</a></div><div class="ttdef"><b>Definition</b> H5Rpublic.h:97</div></div>
</div><!-- fragment --><p>References can be stored and retrieved from a file by invoking the <a class="el" href="group___h5_d.html#ga98f44998b67587662af8b0d8a0a75906" title="Writes raw data from a buffer to a dataset.">H5Dwrite</a> and <a class="el" href="group___h5_d.html#ga8287d5a7be7b8e55ffeff68f7d26811c" title="Reads raw data from a dataset into a provided buffer.">H5Dread</a> functions with this single predefined type: <a class="el" href="group___p_d_t_s_t_d.html#ga342d286867f160739f9f5359303759cc">H5T_STD_REF</a>.</p>
<p>The advantage of a single type is that it becomes easier for users to mix references of different types. It is also more in line with the opaque type now defined for references. Note that when reading references back from a file, the library may, in consequence of this new design, allocate memory for each of these references. To release the memory, one must either call <a class="el" href="group___h5_r.html#ga026114e6c23588bf89bb473eb9e4d095" title="Closes a reference.">H5Rdestroy</a> on each of the references or, for convenience, call the new <a class="el" href="group___v_l_e_n.html#ga6851783a68a0f868c27300cb5622fbbe" title="Reclaims the variable length (VL) datatype memory buffers.">H5Treclaim</a> function on the buffer that contains the array of references (type can be compound type, array).</p>
<p>As mentioned, instead of having separate routines for both vlen and reference types, we unify the existing: </p><div class="fragment"><div class="line"><a class="code hl_typedef" href="_h5public_8h.html#a3b079ecf932a5c599499cf7e298af160">herr_t</a> <a class="code hl_function" href="group___h5_d.html#ga222a2fd93868e2524b2e42c3c6146119">H5Dvlen_reclaim</a>(<a class="code hl_typedef" href="_h5_ipublic_8h.html#a0045db7ff9c22ad35db6ae91662e1943">hid_t</a> type_id, <a class="code hl_typedef" href="_h5_ipublic_8h.html#a0045db7ff9c22ad35db6ae91662e1943">hid_t</a> space_id, <a class="code hl_typedef" href="_h5_ipublic_8h.html#a0045db7ff9c22ad35db6ae91662e1943">hid_t</a> dxpl_id, <span class="keywordtype">void</span> *buf);</div>
<div class="ttc" id="agroup___h5_d_html_ga222a2fd93868e2524b2e42c3c6146119"><div class="ttname"><a href="group___h5_d.html#ga222a2fd93868e2524b2e42c3c6146119">H5Dvlen_reclaim</a></div><div class="ttdeci">herr_t H5Dvlen_reclaim(hid_t type_id, hid_t space_id, hid_t dxpl_id, void *buf)</div><div class="ttdoc">Reclaims variable-length (VL) datatype memory buffers.</div></div>
</div><!-- fragment --><p> to </p><div class="fragment"><div class="line"><a class="code hl_typedef" href="_h5public_8h.html#a3b079ecf932a5c599499cf7e298af160">herr_t</a> <a class="code hl_function" href="group___v_l_e_n.html#ga6851783a68a0f868c27300cb5622fbbe">H5Treclaim</a>(<a class="code hl_typedef" href="_h5_ipublic_8h.html#a0045db7ff9c22ad35db6ae91662e1943">hid_t</a> type_id, <a class="code hl_typedef" href="_h5_ipublic_8h.html#a0045db7ff9c22ad35db6ae91662e1943">hid_t</a> space_id, <a class="code hl_typedef" href="_h5_ipublic_8h.html#a0045db7ff9c22ad35db6ae91662e1943">hid_t</a> dxpl_id, <span class="keywordtype">void</span> *buf);</div>
<div class="ttc" id="agroup___v_l_e_n_html_ga6851783a68a0f868c27300cb5622fbbe"><div class="ttname"><a href="group___v_l_e_n.html#ga6851783a68a0f868c27300cb5622fbbe">H5Treclaim</a></div><div class="ttdeci">herr_t H5Treclaim(hid_t type_id, hid_t space_id, hid_t plist_id, void *buf)</div><div class="ttdoc">Reclaims the variable length (VL) datatype memory buffers.</div></div>
</div><!-- fragment --><h2><a class="anchor" id="subsec_reference_compat"></a>
API Compatibility</h2>
<p>To preserve compatibility with applications and middleware libraries that have been using the existing reference API, we keep the existing <a class="el" href="group___h5_r.html#ga0ac6997b5de26b11d91a95de2869950d" title="Creates a reference.">H5Rcreate</a>, <a class="el" href="group___h5_r.html#ga9b09586f7b6ec708434dd8f95f58a9b7" title="Opens the HDF5 object referenced.">H5Rdereference2</a>, <a class="el" href="group___h5_r.html#ga1702d609e85b9edd3d1e526a0276484f" title="Sets up a dataspace and selection as specified by a region reference.">H5Rget_region</a>, <a class="el" href="group___h5_r.html#ga766e39a76bcdd68dc514425353eff807" title="Retrieves the type of object that an object reference points to.">H5Rget_obj_type2</a> and <a class="el" href="group___h5_r.html#ga4c112c388f697324270fd085100dccaa" title="Retrieves a name for a referenced object.">H5Rget_name</a> routines, but moved to the deprecated API list of functions.</p>
<p>It is important to note though that these routines only support the original reference types, noted as <a class="el" href="_h5_rpublic_8h.html#a7d148ddc165e65b01efabfd738ac056eae218034c065fc240fab1b2c709b7e23c">H5R_OBJECT1</a> and <a class="el" href="_h5_rpublic_8h.html#a7d148ddc165e65b01efabfd738ac056eac9d8cfad097bec7d118333303f67c916">H5R_DATASET_REGION1</a> respectively. Any other reference type passed to these routines will return an error. For convenience and compatibility with previous versions of the library we define both <a class="el" href="_h5_rpublic_8h.html#ae1ffa09875ca6778df3a577592dacbd2">H5R_OBJECT</a> and <a class="el" href="_h5_rpublic_8h.html#a2a28c48c03a4616a02f9157fca4b2df0">H5R_DATASET_REGION</a> to map to the original reference types </p><div class="fragment"><div class="line"><span class="comment">// Versions for compatibility</span></div>
<div class="line"><span class="preprocessor">#define H5R_OBJECT         H5R_OBJECT1</span></div>
<div class="line"><span class="preprocessor">#define H5R_DATASET_REGION H5R_DATASET_REGION1</span></div>
</div><!-- fragment --><p>When creating and accessing references through these deprecated routines, users are still expected to use the datatypes which describe the <a class="el" href="_h5_rpublic_8h.html#af1f69150fc8b3d6bf182da39dc0fe081">hobj_ref_t</a> and <a class="el" href="structhdset__reg__ref__t.html">hdset_reg_ref_t</a> types, <a class="el" href="group___p_d_t_s_t_d.html#gadc17e0960dc7ef08e029bf17201670e1">H5T_STD_REF_OBJ</a> and <a class="el" href="group___p_d_t_s_t_d.html#gaf5cb0d5cec3d40d8b3ac27512f86895e">H5T_STD_REF_DSETREG</a>.</p>
<p>One important aspect of these changes is to ensure that previously written data can still be readable after those revisions and that new files produced will not create any undefined behavior when used with previous versions of the library. Backward as well as forward compatibility is summarized in the table:</p>
<table class="doxtable">
<tr>
<th>Version</th><th>Old File Format/Old API</th><th>Old File Format/New API</th><th>New File Format/Old API</th><th>New File Format/New API  </th></tr>
<tr>
<td>&lt; 1.12.0</td><td>No change</td><td>N/A</td><td>Datatype version bump prevents from reading unknown reference types</td><td>N/A  </td></tr>
<tr>
<td>&ge; 1.12.0 </td><td>Read and write references through old datatypes and use <a class="el" href="_h5_rpublic_8h.html#af1f69150fc8b3d6bf182da39dc0fe081">hobj_ref_t</a> and <a class="el" href="structhdset__reg__ref__t.html">hdset_reg_ref_t</a> types </td><td>Read and write using <a class="el" href="group___p_d_t_s_t_d.html#ga342d286867f160739f9f5359303759cc">H5T_STD_REF</a> to convert to new <a class="el" href="struct_h5_r__ref__t.html">H5R_ref_t</a> type </td><td>Cannot use old API with new reference types </td><td>Can use opaque <a class="el" href="struct_h5_r__ref__t.html">H5R_ref_t</a> type for all reference types  </td></tr>
</table>
<p>Because previous library versions do not have a way of detecting when new unknown references types are read, we have to increment the global version of the datatypes, so that early detection can be done and the appropriate error is returned to the user. For versions prior to this change, the library will return an error when the datatype encountered has a version number greater than the currently supported version. Also, to prevent datatype version changes in the future, all library branches are now patched to check for unknown reference types.</p>
<p>When reading old data with the new library version, one can either keep using the <a class="el" href="group___p_d_t_s_t_d.html#gadc17e0960dc7ef08e029bf17201670e1">H5T_STD_REF_OBJ</a> and <a class="el" href="group___p_d_t_s_t_d.html#gaf5cb0d5cec3d40d8b3ac27512f86895e">H5T_STD_REF_DSETREG</a> datatypes, which can be queried when opening a dataset, for example using <a class="el" href="group___h5_d.html#ga7cd04b8332e8a0939b9973fbc500cadb" title="Returns an identifier for a copy of the datatype for a dataset.">H5Dget_type</a>, or use the <a class="el" href="group___p_d_t_s_t_d.html#ga342d286867f160739f9f5359303759cc">H5T_STD_REF</a> datatype, which will trigger automatic type conversion. The <a class="el" href="group___p_d_t_s_t_d.html#gadc17e0960dc7ef08e029bf17201670e1">H5T_STD_REF_OBJ</a> and <a class="el" href="group___p_d_t_s_t_d.html#gaf5cb0d5cec3d40d8b3ac27512f86895e">H5T_STD_REF_DSETREG</a> datatypes require the use of the respective <a class="el" href="_h5_rpublic_8h.html#af1f69150fc8b3d6bf182da39dc0fe081">hobj_ref_t</a> and <a class="el" href="structhdset__reg__ref__t.html">hdset_reg_ref_t</a> types, which can only be used with the old API functions. These types do not embed all the required information to be simply cast to an <a class="el" href="struct_h5_r__ref__t.html">H5R_ref_t</a> type. When an <a class="el" href="struct_h5_r__ref__t.html">H5R_ref_t</a> type is desired, the <a class="el" href="group___p_d_t_s_t_d.html#ga342d286867f160739f9f5359303759cc">H5T_STD_REF</a> datatype must be used, allowing old reference data to be used with the new API.</p>
<h2><a class="anchor" id="subsec_reference_example"></a>
Usage Examples</h2>
<h3><a class="anchor" id="subsubsec_reference_example_new"></a>
External References</h3>
<p>The example below illustrates the use of the new API with files that are opened read-only. Created references to the objects in that file are stored into a separate file, and accessed from that file, without the user explicitly opening the original file that was referenced. </p><div class="fragment"><div class="line"><span class="preprocessor">#include &lt;stdlib.h&gt;</span></div>
<div class="line"> </div>
<div class="line"><span class="preprocessor"> #include &quot;hdf5.h&quot;</span></div>
<div class="line"><span class="preprocessor"> #include &lt;assert.h&gt;</span></div>
<div class="line"> </div>
<div class="line"><span class="preprocessor"> #define H5FILE_NAME1 &quot;refer_extern1.h5&quot;</span></div>
<div class="line"><span class="preprocessor"> #define H5FILE_NAME2 &quot;refer_extern2.h5&quot;</span></div>
<div class="line"> </div>
<div class="line"><span class="preprocessor"> #define NDIMS 1 </span><span class="comment">// Number of dimensions</span></div>
<div class="line"><span class="preprocessor"> #define BUF_SIZE 4 </span><span class="comment">// Size of example buffer</span></div>
<div class="line"><span class="preprocessor"> #define NREFS 1 </span><span class="comment">// Number of references</span></div>
<div class="line"> </div>
<div class="line"> <span class="keywordtype">int</span> main(<span class="keywordtype">void</span>) {</div>
<div class="line">     <a class="code hl_typedef" href="_h5_ipublic_8h.html#a0045db7ff9c22ad35db6ae91662e1943">hid_t</a> file1, dset1, space1;</div>
<div class="line">     <a class="code hl_typedef" href="_h5public_8h.html#a7f81cce70fb546af88da24d9285d3c1c">hsize_t</a> dset1_dims[NDIMS] = { BUF_SIZE };</div>
<div class="line">     <span class="keywordtype">int</span> dset_buf[BUF_SIZE];</div>
<div class="line"> </div>
<div class="line">     <a class="code hl_typedef" href="_h5_ipublic_8h.html#a0045db7ff9c22ad35db6ae91662e1943">hid_t</a> file2, dset2, space2;</div>
<div class="line">     <a class="code hl_typedef" href="_h5public_8h.html#a7f81cce70fb546af88da24d9285d3c1c">hsize_t</a> dset2_dims[NDIMS] = { NREFS };</div>
<div class="line">     <a class="code hl_struct" href="struct_h5_r__ref__t.html">H5R_ref_t</a> ref_buf[NREFS] = { 0 };</div>
<div class="line">     <a class="code hl_enumeration" href="_h5_opublic_8h.html#a929ff459574495f461657f6be804cdec">H5O_type_t</a> obj_type;</div>
<div class="line">     <span class="keywordtype">int</span> i;</div>
<div class="line"> </div>
<div class="line">     <span class="keywordflow">for</span> (i = 0; i &lt; BUF_SIZE; i++)</div>
<div class="line">         dset_buf[i] = i;</div>
<div class="line"> </div>
<div class="line">     <span class="comment">// Create file with one dataset and close it</span></div>
<div class="line">     file1 = <a class="code hl_function" href="group___h5_f.html#gae64b51ee9ac0781bc4ccc599d98387f4">H5Fcreate</a>(H5FILE_NAME1, <a class="code hl_define" href="_h5_fpublic_8h.html#a5a2d6726f9ad8d2bca8df2b817e5ad6a">H5F_ACC_TRUNC</a>, <a class="code hl_define" href="_h5_ppublic_8h.html#afa85e97bfbf9bf1c58e39263846c568f">H5P_DEFAULT</a>, <a class="code hl_define" href="_h5_ppublic_8h.html#afa85e97bfbf9bf1c58e39263846c568f">H5P_DEFAULT</a>);</div>
<div class="line">     space1 = <a class="code hl_function" href="group___h5_s.html#ga8e35eea5738b4805856eac7d595254ae">H5Screate_simple</a>(NDIMS, dset1_dims, NULL);</div>
<div class="line">     dset1 = <a class="code hl_function" href="group___h5_d.html#gabf62045119f4e9c512d87d77f2f992df">H5Dcreate2</a>(file1, <span class="stringliteral">&quot;dataset1&quot;</span>, <a class="code hl_define" href="group___p_d_t_n_a_t.html#ga3cf93ffc6782be68070ef8e00f219ec2">H5T_NATIVE_INT</a>, space1, <a class="code hl_define" href="_h5_ppublic_8h.html#afa85e97bfbf9bf1c58e39263846c568f">H5P_DEFAULT</a>, <a class="code hl_define" href="_h5_ppublic_8h.html#afa85e97bfbf9bf1c58e39263846c568f">H5P_DEFAULT</a>, <a class="code hl_define" href="_h5_ppublic_8h.html#afa85e97bfbf9bf1c58e39263846c568f">H5P_DEFAULT</a>);</div>
<div class="line">     <a class="code hl_function" href="group___h5_d.html#ga98f44998b67587662af8b0d8a0a75906">H5Dwrite</a>(dset1, <a class="code hl_define" href="group___p_d_t_n_a_t.html#ga3cf93ffc6782be68070ef8e00f219ec2">H5T_NATIVE_INT</a>, <a class="code hl_define" href="_h5_spublic_8h.html#a5f96eeee84b987f18470737f85af0484">H5S_ALL</a>, <a class="code hl_define" href="_h5_spublic_8h.html#a5f96eeee84b987f18470737f85af0484">H5S_ALL</a>, <a class="code hl_define" href="_h5_ppublic_8h.html#afa85e97bfbf9bf1c58e39263846c568f">H5P_DEFAULT</a>, dset_buf);</div>
<div class="line">     <a class="code hl_function" href="group___h5_d.html#gae47c3f38db49db127faf221624c30609">H5Dclose</a>(dset1);</div>
<div class="line">     <a class="code hl_function" href="group___h5_s.html#ga2b53128a39c8f104c1c9c2a91590fcc1">H5Sclose</a>(space1);</div>
<div class="line">     <a class="code hl_function" href="group___h5_f.html#gac55cd91d80822e4f8c2a7f04ea71b124">H5Fclose</a>(file1);</div>
<div class="line"> </div>
<div class="line">     <span class="comment">// Create reference to dataset1 in &quot;refer_extern1.h5&quot;</span></div>
<div class="line">     file1 = <a class="code hl_function" href="group___h5_f.html#gaa3f4f877b9bb591f3880423ed2bf44bc">H5Fopen</a>(H5FILE_NAME1, <a class="code hl_define" href="_h5_fpublic_8h.html#a1c406ffa89f4acf5a332144a2683d394">H5F_ACC_RDONLY</a>, <a class="code hl_define" href="_h5_ppublic_8h.html#afa85e97bfbf9bf1c58e39263846c568f">H5P_DEFAULT</a>);</div>
<div class="line">     <a class="code hl_function" href="group___h5_r.html#gad0fb6ec99ecefa602756a5682addfc69">H5Rcreate_object</a>(file1, <span class="stringliteral">&quot;dataset1&quot;</span>, &amp;ref_buf[0]);</div>
<div class="line">     <a class="code hl_function" href="group___h5_f.html#gac55cd91d80822e4f8c2a7f04ea71b124">H5Fclose</a>(file1);</div>
<div class="line"> </div>
<div class="line">     <span class="comment">// Store reference in dataset in separate file &quot;refer_extern2.h5&quot;</span></div>
<div class="line">     file2 = <a class="code hl_function" href="group___h5_f.html#gae64b51ee9ac0781bc4ccc599d98387f4">H5Fcreate</a>(H5FILE_NAME2, <a class="code hl_define" href="_h5_fpublic_8h.html#a5a2d6726f9ad8d2bca8df2b817e5ad6a">H5F_ACC_TRUNC</a>, <a class="code hl_define" href="_h5_ppublic_8h.html#afa85e97bfbf9bf1c58e39263846c568f">H5P_DEFAULT</a>, <a class="code hl_define" href="_h5_ppublic_8h.html#afa85e97bfbf9bf1c58e39263846c568f">H5P_DEFAULT</a>);</div>
<div class="line">     space2 = <a class="code hl_function" href="group___h5_s.html#ga8e35eea5738b4805856eac7d595254ae">H5Screate_simple</a>(NDIMS, dset2_dims, NULL);</div>
<div class="line">     dset2 = <a class="code hl_function" href="group___h5_d.html#gabf62045119f4e9c512d87d77f2f992df">H5Dcreate2</a>(file2, <span class="stringliteral">&quot;references&quot;</span>, <a class="code hl_define" href="group___p_d_t_s_t_d.html#ga342d286867f160739f9f5359303759cc">H5T_STD_REF</a>, space2, <a class="code hl_define" href="_h5_ppublic_8h.html#afa85e97bfbf9bf1c58e39263846c568f">H5P_DEFAULT</a>, <a class="code hl_define" href="_h5_ppublic_8h.html#afa85e97bfbf9bf1c58e39263846c568f">H5P_DEFAULT</a>, <a class="code hl_define" href="_h5_ppublic_8h.html#afa85e97bfbf9bf1c58e39263846c568f">H5P_DEFAULT</a>);</div>
<div class="line">     <a class="code hl_function" href="group___h5_d.html#ga98f44998b67587662af8b0d8a0a75906">H5Dwrite</a>(dset2, <a class="code hl_define" href="group___p_d_t_s_t_d.html#ga342d286867f160739f9f5359303759cc">H5T_STD_REF</a>, <a class="code hl_define" href="_h5_spublic_8h.html#a5f96eeee84b987f18470737f85af0484">H5S_ALL</a>, <a class="code hl_define" href="_h5_spublic_8h.html#a5f96eeee84b987f18470737f85af0484">H5S_ALL</a>, <a class="code hl_define" href="_h5_ppublic_8h.html#afa85e97bfbf9bf1c58e39263846c568f">H5P_DEFAULT</a>, ref_buf);</div>
<div class="line">     <a class="code hl_function" href="group___h5_d.html#gae47c3f38db49db127faf221624c30609">H5Dclose</a>(dset2);</div>
<div class="line">     <a class="code hl_function" href="group___h5_s.html#ga2b53128a39c8f104c1c9c2a91590fcc1">H5Sclose</a>(space2);</div>
<div class="line">     <a class="code hl_function" href="group___h5_f.html#gac55cd91d80822e4f8c2a7f04ea71b124">H5Fclose</a>(file2);</div>
<div class="line">     <a class="code hl_function" href="group___h5_r.html#ga026114e6c23588bf89bb473eb9e4d095">H5Rdestroy</a>(&amp;ref_buf[0]);</div>
<div class="line"> </div>
<div class="line">     <span class="comment">// Read reference back from &quot;refer_extern2.h5&quot;</span></div>
<div class="line">     file2 = <a class="code hl_function" href="group___h5_f.html#gaa3f4f877b9bb591f3880423ed2bf44bc">H5Fopen</a>(H5FILE_NAME2, <a class="code hl_define" href="_h5_fpublic_8h.html#a1c406ffa89f4acf5a332144a2683d394">H5F_ACC_RDONLY</a>, <a class="code hl_define" href="_h5_ppublic_8h.html#afa85e97bfbf9bf1c58e39263846c568f">H5P_DEFAULT</a>);</div>
<div class="line">     dset2 = <a class="code hl_function" href="group___h5_d.html#ga04198c4cf0b849ed3a8921f6c7169ee2">H5Dopen2</a>(file2, <span class="stringliteral">&quot;references&quot;</span>, <a class="code hl_define" href="_h5_ppublic_8h.html#afa85e97bfbf9bf1c58e39263846c568f">H5P_DEFAULT</a>);</div>
<div class="line">     <a class="code hl_function" href="group___h5_d.html#ga8287d5a7be7b8e55ffeff68f7d26811c">H5Dread</a>(dset2, <a class="code hl_define" href="group___p_d_t_s_t_d.html#ga342d286867f160739f9f5359303759cc">H5T_STD_REF</a>, <a class="code hl_define" href="_h5_spublic_8h.html#a5f96eeee84b987f18470737f85af0484">H5S_ALL</a>, <a class="code hl_define" href="_h5_spublic_8h.html#a5f96eeee84b987f18470737f85af0484">H5S_ALL</a>, <a class="code hl_define" href="_h5_ppublic_8h.html#afa85e97bfbf9bf1c58e39263846c568f">H5P_DEFAULT</a>, ref_buf);</div>
<div class="line">     <a class="code hl_function" href="group___h5_d.html#gae47c3f38db49db127faf221624c30609">H5Dclose</a>(dset2);</div>
<div class="line">     <a class="code hl_function" href="group___h5_f.html#gac55cd91d80822e4f8c2a7f04ea71b124">H5Fclose</a>(file2);</div>
<div class="line"> </div>
<div class="line">     <span class="comment">// Access reference and read dataset data without opening original file</span></div>
<div class="line">     assert(<a class="code hl_function" href="group___h5_r.html#ga56989d33835ec289269d366dc28aa4ad">H5Rget_type</a>((<span class="keyword">const</span> <a class="code hl_struct" href="struct_h5_r__ref__t.html">H5R_ref_t</a> *)&amp;ref_buf[0]) == <a class="code hl_enumvalue" href="_h5_rpublic_8h.html#a7d148ddc165e65b01efabfd738ac056ea58376ddd57d594982e0034a3ca2e5bad">H5R_OBJECT2</a>);</div>
<div class="line">     <a class="code hl_function" href="group___h5_r.html#ga6fb098a1a4c9369d76dbeeaf40d6d2af">H5Rget_obj_type3</a>((<span class="keyword">const</span> <a class="code hl_struct" href="struct_h5_r__ref__t.html">H5R_ref_t</a> *)&amp;ref_buf[0], <a class="code hl_define" href="_h5_ppublic_8h.html#afa85e97bfbf9bf1c58e39263846c568f">H5P_DEFAULT</a>, &amp;obj_type);</div>
<div class="line">     assert(obj_type == <a class="code hl_enumvalue" href="_h5_opublic_8h.html#a929ff459574495f461657f6be804cdeca5ca744a77f8cd2b28dda90c37807ae31">H5O_TYPE_DATASET</a>);</div>
<div class="line">     dset1 = <a class="code hl_function" href="group___h5_r.html#gaa6692bd3a5b490c8db05b90a5888d0dd">H5Ropen_object</a>((<span class="keyword">const</span> <a class="code hl_struct" href="struct_h5_r__ref__t.html">H5R_ref_t</a> *)&amp;ref_buf[0], <a class="code hl_define" href="_h5_ppublic_8h.html#afa85e97bfbf9bf1c58e39263846c568f">H5P_DEFAULT</a>, <a class="code hl_define" href="_h5_ppublic_8h.html#afa85e97bfbf9bf1c58e39263846c568f">H5P_DEFAULT</a>);</div>
<div class="line">     <a class="code hl_function" href="group___h5_d.html#ga8287d5a7be7b8e55ffeff68f7d26811c">H5Dread</a>(dset1, <a class="code hl_define" href="group___p_d_t_n_a_t.html#ga3cf93ffc6782be68070ef8e00f219ec2">H5T_NATIVE_INT</a>, <a class="code hl_define" href="_h5_spublic_8h.html#a5f96eeee84b987f18470737f85af0484">H5S_ALL</a>, <a class="code hl_define" href="_h5_spublic_8h.html#a5f96eeee84b987f18470737f85af0484">H5S_ALL</a>, <a class="code hl_define" href="_h5_ppublic_8h.html#afa85e97bfbf9bf1c58e39263846c568f">H5P_DEFAULT</a>, dset_buf);</div>
<div class="line">     <a class="code hl_function" href="group___h5_d.html#gae47c3f38db49db127faf221624c30609">H5Dclose</a>(dset1);</div>
<div class="line">     <a class="code hl_function" href="group___h5_r.html#ga026114e6c23588bf89bb473eb9e4d095">H5Rdestroy</a>(&amp;ref_buf[0]);</div>
<div class="line"> </div>
<div class="line">     <span class="keywordflow">for</span> (i = 0; i &lt; BUF_SIZE; i++)</div>
<div class="line">         assert(dset_buf[i] == i);</div>
<div class="line"> </div>
<div class="line">     <span class="keywordflow">return</span> 0;</div>
<div class="line"> }</div>
<div class="ttc" id="a_h5_fpublic_8h_html_a1c406ffa89f4acf5a332144a2683d394"><div class="ttname"><a href="_h5_fpublic_8h.html#a1c406ffa89f4acf5a332144a2683d394">H5F_ACC_RDONLY</a></div><div class="ttdeci">#define H5F_ACC_RDONLY</div><div class="ttdef"><b>Definition</b> H5Fpublic.h:48</div></div>
<div class="ttc" id="a_h5_fpublic_8h_html_a5a2d6726f9ad8d2bca8df2b817e5ad6a"><div class="ttname"><a href="_h5_fpublic_8h.html#a5a2d6726f9ad8d2bca8df2b817e5ad6a">H5F_ACC_TRUNC</a></div><div class="ttdeci">#define H5F_ACC_TRUNC</div><div class="ttdef"><b>Definition</b> H5Fpublic.h:50</div></div>
<div class="ttc" id="a_h5_opublic_8h_html_a929ff459574495f461657f6be804cdeca5ca744a77f8cd2b28dda90c37807ae31"><div class="ttname"><a href="_h5_opublic_8h.html#a929ff459574495f461657f6be804cdeca5ca744a77f8cd2b28dda90c37807ae31">H5O_TYPE_DATASET</a></div><div class="ttdeci">@ H5O_TYPE_DATASET</div><div class="ttdef"><b>Definition</b> H5Opublic.h:110</div></div>
<div class="ttc" id="a_h5_ppublic_8h_html_afa85e97bfbf9bf1c58e39263846c568f"><div class="ttname"><a href="_h5_ppublic_8h.html#afa85e97bfbf9bf1c58e39263846c568f">H5P_DEFAULT</a></div><div class="ttdeci">#define H5P_DEFAULT</div><div class="ttdef"><b>Definition</b> H5Ppublic.h:228</div></div>
<div class="ttc" id="a_h5_spublic_8h_html_a5f96eeee84b987f18470737f85af0484"><div class="ttname"><a href="_h5_spublic_8h.html#a5f96eeee84b987f18470737f85af0484">H5S_ALL</a></div><div class="ttdeci">#define H5S_ALL</div><div class="ttdef"><b>Definition</b> H5Spublic.h:32</div></div>
<div class="ttc" id="a_h5public_8h_html_a7f81cce70fb546af88da24d9285d3c1c"><div class="ttname"><a href="_h5public_8h.html#a7f81cce70fb546af88da24d9285d3c1c">hsize_t</a></div><div class="ttdeci">uint64_t hsize_t</div><div class="ttdef"><b>Definition</b> H5public.h:301</div></div>
<div class="ttc" id="agroup___h5_d_html_ga04198c4cf0b849ed3a8921f6c7169ee2"><div class="ttname"><a href="group___h5_d.html#ga04198c4cf0b849ed3a8921f6c7169ee2">H5Dopen2</a></div><div class="ttdeci">hid_t H5Dopen2(hid_t loc_id, const char *name, hid_t dapl_id)</div><div class="ttdoc">Opens an existing dataset.</div></div>
<div class="ttc" id="agroup___h5_d_html_ga8287d5a7be7b8e55ffeff68f7d26811c"><div class="ttname"><a href="group___h5_d.html#ga8287d5a7be7b8e55ffeff68f7d26811c">H5Dread</a></div><div class="ttdeci">herr_t H5Dread(hid_t dset_id, hid_t mem_type_id, hid_t mem_space_id, hid_t file_space_id, hid_t dxpl_id, void *buf)</div><div class="ttdoc">Reads raw data from a dataset into a provided buffer.</div></div>
<div class="ttc" id="agroup___h5_d_html_ga98f44998b67587662af8b0d8a0a75906"><div class="ttname"><a href="group___h5_d.html#ga98f44998b67587662af8b0d8a0a75906">H5Dwrite</a></div><div class="ttdeci">herr_t H5Dwrite(hid_t dset_id, hid_t mem_type_id, hid_t mem_space_id, hid_t file_space_id, hid_t dxpl_id, const void *buf)</div><div class="ttdoc">Writes raw data from a buffer to a dataset.</div></div>
<div class="ttc" id="agroup___h5_d_html_gabf62045119f4e9c512d87d77f2f992df"><div class="ttname"><a href="group___h5_d.html#gabf62045119f4e9c512d87d77f2f992df">H5Dcreate2</a></div><div class="ttdeci">hid_t H5Dcreate2(hid_t loc_id, const char *name, hid_t type_id, hid_t space_id, hid_t lcpl_id, hid_t dcpl_id, hid_t dapl_id)</div><div class="ttdoc">Creates a new dataset and links it into the file.</div></div>
<div class="ttc" id="agroup___h5_d_html_gae47c3f38db49db127faf221624c30609"><div class="ttname"><a href="group___h5_d.html#gae47c3f38db49db127faf221624c30609">H5Dclose</a></div><div class="ttdeci">herr_t H5Dclose(hid_t dset_id)</div><div class="ttdoc">Closes the specified dataset.</div></div>
<div class="ttc" id="agroup___h5_f_html_gaa3f4f877b9bb591f3880423ed2bf44bc"><div class="ttname"><a href="group___h5_f.html#gaa3f4f877b9bb591f3880423ed2bf44bc">H5Fopen</a></div><div class="ttdeci">hid_t H5Fopen(const char *filename, unsigned flags, hid_t fapl_id)</div><div class="ttdoc">Opens an existing HDF5 file.</div></div>
<div class="ttc" id="agroup___h5_f_html_gac55cd91d80822e4f8c2a7f04ea71b124"><div class="ttname"><a href="group___h5_f.html#gac55cd91d80822e4f8c2a7f04ea71b124">H5Fclose</a></div><div class="ttdeci">herr_t H5Fclose(hid_t file_id)</div><div class="ttdoc">Terminates access to an HDF5 file.</div></div>
<div class="ttc" id="agroup___h5_f_html_gae64b51ee9ac0781bc4ccc599d98387f4"><div class="ttname"><a href="group___h5_f.html#gae64b51ee9ac0781bc4ccc599d98387f4">H5Fcreate</a></div><div class="ttdeci">hid_t H5Fcreate(const char *filename, unsigned flags, hid_t fcpl_id, hid_t fapl_id)</div><div class="ttdoc">Creates an HDF5 file.</div></div>
<div class="ttc" id="agroup___h5_s_html_ga2b53128a39c8f104c1c9c2a91590fcc1"><div class="ttname"><a href="group___h5_s.html#ga2b53128a39c8f104c1c9c2a91590fcc1">H5Sclose</a></div><div class="ttdeci">herr_t H5Sclose(hid_t space_id)</div><div class="ttdoc">Releases and terminates access to a dataspace.</div></div>
<div class="ttc" id="agroup___h5_s_html_ga8e35eea5738b4805856eac7d595254ae"><div class="ttname"><a href="group___h5_s.html#ga8e35eea5738b4805856eac7d595254ae">H5Screate_simple</a></div><div class="ttdeci">hid_t H5Screate_simple(int rank, const hsize_t dims[], const hsize_t maxdims[])</div><div class="ttdoc">Creates a new simple dataspace and opens it for access.</div></div>
<div class="ttc" id="agroup___p_d_t_n_a_t_html_ga3cf93ffc6782be68070ef8e00f219ec2"><div class="ttname"><a href="group___p_d_t_n_a_t.html#ga3cf93ffc6782be68070ef8e00f219ec2">H5T_NATIVE_INT</a></div><div class="ttdeci">#define H5T_NATIVE_INT</div><div class="ttdef"><b>Definition</b> H5Tpublic.h:780</div></div>
<div class="ttc" id="agroup___p_d_t_s_t_d_html_ga342d286867f160739f9f5359303759cc"><div class="ttname"><a href="group___p_d_t_s_t_d.html#ga342d286867f160739f9f5359303759cc">H5T_STD_REF</a></div><div class="ttdeci">#define H5T_STD_REF</div><div class="ttdef"><b>Definition</b> H5Tpublic.h:428</div></div>
</div><!-- fragment --><h3><a class="anchor" id="subsubsec_reference_example_old"></a>
Backward Compatibility and New API</h3>
<p>The example below illustrates the use of the new API with a file that was written using the old-style reference API, showing how one can take advantage of the automatic type conversion from old reference type to new reference type. </p><div class="fragment"><div class="line"><span class="preprocessor">#include &lt;stdlib.h&gt;</span></div>
<div class="line"> </div>
<div class="line"><span class="preprocessor"> #include &quot;hdf5.h&quot;</span></div>
<div class="line"><span class="preprocessor"> #include &lt;assert.h&gt;</span></div>
<div class="line"> </div>
<div class="line"><span class="preprocessor"> #define H5FILE_NAME &quot;refer_deprec.h5&quot;</span></div>
<div class="line"> </div>
<div class="line"><span class="preprocessor"> #define NDIMS 1 </span><span class="comment">// Number of dimensions</span></div>
<div class="line"><span class="preprocessor"> #define BUF_SIZE 4 </span><span class="comment">// Size of example buffer</span></div>
<div class="line"><span class="preprocessor"> #define NREFS 1 </span><span class="comment">// Number of references</span></div>
<div class="line"> </div>
<div class="line"> <span class="keywordtype">int</span> main(<span class="keywordtype">void</span>) {</div>
<div class="line">     <a class="code hl_typedef" href="_h5_ipublic_8h.html#a0045db7ff9c22ad35db6ae91662e1943">hid_t</a> file1, dset1, space1;</div>
<div class="line">     <a class="code hl_typedef" href="_h5public_8h.html#a7f81cce70fb546af88da24d9285d3c1c">hsize_t</a> dset1_dims[NDIMS] = { BUF_SIZE };</div>
<div class="line">     <span class="keywordtype">int</span> dset_buf[BUF_SIZE];</div>
<div class="line"> </div>
<div class="line">     <a class="code hl_typedef" href="_h5_ipublic_8h.html#a0045db7ff9c22ad35db6ae91662e1943">hid_t</a> dset2, space2;</div>
<div class="line">     <a class="code hl_typedef" href="_h5public_8h.html#a7f81cce70fb546af88da24d9285d3c1c">hsize_t</a> dset2_dims[NDIMS] = { NREFS };</div>
<div class="line">     <a class="code hl_typedef" href="_h5_rpublic_8h.html#af1f69150fc8b3d6bf182da39dc0fe081">hobj_ref_t</a> ref_buf[NREFS] = { 0 };</div>
<div class="line">     <a class="code hl_struct" href="struct_h5_r__ref__t.html">H5R_ref_t</a> new_ref_buf[NREFS] = { 0 };</div>
<div class="line">     <a class="code hl_enumeration" href="_h5_opublic_8h.html#a929ff459574495f461657f6be804cdec">H5O_type_t</a> obj_type;</div>
<div class="line">     <span class="keywordtype">int</span> i;</div>
<div class="line"> </div>
<div class="line">     <span class="keywordflow">for</span> (i = 0; i &lt; BUF_SIZE; i++)</div>
<div class="line">         dset_buf[i] = i;</div>
<div class="line"> </div>
<div class="line">     <span class="comment">// Create file with one dataset and close it</span></div>
<div class="line">     file1 = <a class="code hl_function" href="group___h5_f.html#gae64b51ee9ac0781bc4ccc599d98387f4">H5Fcreate</a>(H5FILE_NAME, <a class="code hl_define" href="_h5_fpublic_8h.html#a5a2d6726f9ad8d2bca8df2b817e5ad6a">H5F_ACC_TRUNC</a>, <a class="code hl_define" href="_h5_ppublic_8h.html#afa85e97bfbf9bf1c58e39263846c568f">H5P_DEFAULT</a>, <a class="code hl_define" href="_h5_ppublic_8h.html#afa85e97bfbf9bf1c58e39263846c568f">H5P_DEFAULT</a>);</div>
<div class="line"> </div>
<div class="line">     space1 = <a class="code hl_function" href="group___h5_s.html#ga8e35eea5738b4805856eac7d595254ae">H5Screate_simple</a>(NDIMS, dset1_dims, NULL);</div>
<div class="line">     dset1 = <a class="code hl_function" href="group___h5_d.html#gabf62045119f4e9c512d87d77f2f992df">H5Dcreate2</a>(file1, <span class="stringliteral">&quot;dataset1&quot;</span>, <a class="code hl_define" href="group___p_d_t_n_a_t.html#ga3cf93ffc6782be68070ef8e00f219ec2">H5T_NATIVE_INT</a>, space1, <a class="code hl_define" href="_h5_ppublic_8h.html#afa85e97bfbf9bf1c58e39263846c568f">H5P_DEFAULT</a>, <a class="code hl_define" href="_h5_ppublic_8h.html#afa85e97bfbf9bf1c58e39263846c568f">H5P_DEFAULT</a>, <a class="code hl_define" href="_h5_ppublic_8h.html#afa85e97bfbf9bf1c58e39263846c568f">H5P_DEFAULT</a>);</div>
<div class="line">     <a class="code hl_function" href="group___h5_d.html#ga98f44998b67587662af8b0d8a0a75906">H5Dwrite</a>(dset1, <a class="code hl_define" href="group___p_d_t_n_a_t.html#ga3cf93ffc6782be68070ef8e00f219ec2">H5T_NATIVE_INT</a>, <a class="code hl_define" href="_h5_spublic_8h.html#a5f96eeee84b987f18470737f85af0484">H5S_ALL</a>, <a class="code hl_define" href="_h5_spublic_8h.html#a5f96eeee84b987f18470737f85af0484">H5S_ALL</a>, <a class="code hl_define" href="_h5_ppublic_8h.html#afa85e97bfbf9bf1c58e39263846c568f">H5P_DEFAULT</a>, dset_buf);</div>
<div class="line">     <a class="code hl_function" href="group___h5_d.html#gae47c3f38db49db127faf221624c30609">H5Dclose</a>(dset1);</div>
<div class="line">     <a class="code hl_function" href="group___h5_s.html#ga2b53128a39c8f104c1c9c2a91590fcc1">H5Sclose</a>(space1);</div>
<div class="line"> </div>
<div class="line">     <span class="comment">// Create reference to dataset1 with deprecated API</span></div>
<div class="line">     <span class="comment">// (reminder: there is no destroy call for those references)</span></div>
<div class="line">     <a class="code hl_function" href="group___h5_r.html#ga0ac6997b5de26b11d91a95de2869950d">H5Rcreate</a>(&amp;ref_buf[0], file1, <span class="stringliteral">&quot;dataset1&quot;</span>, <a class="code hl_define" href="_h5_rpublic_8h.html#ae1ffa09875ca6778df3a577592dacbd2">H5R_OBJECT</a>, <a class="code hl_define" href="_h5_ipublic_8h.html#a01eab13dccc91afd6909d74dccb780ba">H5I_INVALID_HID</a>);</div>
<div class="line"> </div>
<div class="line">     <span class="comment">// Store reference in separate dataset using deprecated reference type</span></div>
<div class="line">     space2 = <a class="code hl_function" href="group___h5_s.html#ga8e35eea5738b4805856eac7d595254ae">H5Screate_simple</a>(NDIMS, dset2_dims, NULL);</div>
<div class="line">     dset2 = <a class="code hl_function" href="group___h5_d.html#gabf62045119f4e9c512d87d77f2f992df">H5Dcreate2</a>(file1, <span class="stringliteral">&quot;references&quot;</span>, <a class="code hl_define" href="group___p_d_t_s_t_d.html#gadc17e0960dc7ef08e029bf17201670e1">H5T_STD_REF_OBJ</a>, space2, <a class="code hl_define" href="_h5_ppublic_8h.html#afa85e97bfbf9bf1c58e39263846c568f">H5P_DEFAULT</a>, <a class="code hl_define" href="_h5_ppublic_8h.html#afa85e97bfbf9bf1c58e39263846c568f">H5P_DEFAULT</a>,</div>
<div class="line">                        <a class="code hl_define" href="_h5_ppublic_8h.html#afa85e97bfbf9bf1c58e39263846c568f">H5P_DEFAULT</a>);</div>
<div class="line">     <a class="code hl_function" href="group___h5_d.html#ga98f44998b67587662af8b0d8a0a75906">H5Dwrite</a>(dset2, <a class="code hl_define" href="group___p_d_t_s_t_d.html#gadc17e0960dc7ef08e029bf17201670e1">H5T_STD_REF_OBJ</a>, <a class="code hl_define" href="_h5_spublic_8h.html#a5f96eeee84b987f18470737f85af0484">H5S_ALL</a>, <a class="code hl_define" href="_h5_spublic_8h.html#a5f96eeee84b987f18470737f85af0484">H5S_ALL</a>, <a class="code hl_define" href="_h5_ppublic_8h.html#afa85e97bfbf9bf1c58e39263846c568f">H5P_DEFAULT</a>, ref_buf); <a class="code hl_function" href="group___h5_d.html#gae47c3f38db49db127faf221624c30609">H5Dclose</a>(dset2);</div>
<div class="line">     <a class="code hl_function" href="group___h5_s.html#ga2b53128a39c8f104c1c9c2a91590fcc1">H5Sclose</a>(space2);</div>
<div class="line">     <a class="code hl_function" href="group___h5_f.html#gac55cd91d80822e4f8c2a7f04ea71b124">H5Fclose</a>(file1);</div>
<div class="line"> </div>
<div class="line">     <span class="comment">// Read reference from file using new reference type</span></div>
<div class="line">     file1 = <a class="code hl_function" href="group___h5_f.html#gaa3f4f877b9bb591f3880423ed2bf44bc">H5Fopen</a>(H5FILE_NAME, <a class="code hl_define" href="_h5_fpublic_8h.html#a1c406ffa89f4acf5a332144a2683d394">H5F_ACC_RDONLY</a>, <a class="code hl_define" href="_h5_ppublic_8h.html#afa85e97bfbf9bf1c58e39263846c568f">H5P_DEFAULT</a>);</div>
<div class="line">     dset2 = <a class="code hl_function" href="group___h5_d.html#ga04198c4cf0b849ed3a8921f6c7169ee2">H5Dopen2</a>(file1, <span class="stringliteral">&quot;references&quot;</span>, <a class="code hl_define" href="_h5_ppublic_8h.html#afa85e97bfbf9bf1c58e39263846c568f">H5P_DEFAULT</a>);</div>
<div class="line">     <a class="code hl_function" href="group___h5_d.html#ga8287d5a7be7b8e55ffeff68f7d26811c">H5Dread</a>(dset2, <a class="code hl_define" href="group___p_d_t_s_t_d.html#ga342d286867f160739f9f5359303759cc">H5T_STD_REF</a>, <a class="code hl_define" href="_h5_spublic_8h.html#a5f96eeee84b987f18470737f85af0484">H5S_ALL</a>, <a class="code hl_define" href="_h5_spublic_8h.html#a5f96eeee84b987f18470737f85af0484">H5S_ALL</a>, <a class="code hl_define" href="_h5_ppublic_8h.html#afa85e97bfbf9bf1c58e39263846c568f">H5P_DEFAULT</a>, new_ref_buf);</div>
<div class="line">     <a class="code hl_function" href="group___h5_d.html#gae47c3f38db49db127faf221624c30609">H5Dclose</a>(dset2);</div>
<div class="line"> </div>
<div class="line">     <span class="comment">// Access reference and read dataset data through new API</span></div>
<div class="line">     assert(<a class="code hl_function" href="group___h5_r.html#ga56989d33835ec289269d366dc28aa4ad">H5Rget_type</a>((<span class="keyword">const</span> <a class="code hl_struct" href="struct_h5_r__ref__t.html">H5R_ref_t</a> *)&amp;new_ref_buf[0]) == <a class="code hl_enumvalue" href="_h5_rpublic_8h.html#a7d148ddc165e65b01efabfd738ac056ea58376ddd57d594982e0034a3ca2e5bad">H5R_OBJECT2</a>);</div>
<div class="line">     <a class="code hl_function" href="group___h5_r.html#ga6fb098a1a4c9369d76dbeeaf40d6d2af">H5Rget_obj_type3</a>((<span class="keyword">const</span> <a class="code hl_struct" href="struct_h5_r__ref__t.html">H5R_ref_t</a> *)&amp;new_ref_buf[0], <a class="code hl_define" href="_h5_ppublic_8h.html#afa85e97bfbf9bf1c58e39263846c568f">H5P_DEFAULT</a>, &amp;obj_type);</div>
<div class="line">     assert(obj_type == <a class="code hl_enumvalue" href="_h5_opublic_8h.html#a929ff459574495f461657f6be804cdeca5ca744a77f8cd2b28dda90c37807ae31">H5O_TYPE_DATASET</a>);</div>
<div class="line">     dset1 = <a class="code hl_function" href="group___h5_r.html#gaa6692bd3a5b490c8db05b90a5888d0dd">H5Ropen_object</a>((<span class="keyword">const</span> <a class="code hl_struct" href="struct_h5_r__ref__t.html">H5R_ref_t</a> *)&amp;new_ref_buf[0], <a class="code hl_define" href="_h5_ppublic_8h.html#afa85e97bfbf9bf1c58e39263846c568f">H5P_DEFAULT</a>, <a class="code hl_define" href="_h5_ppublic_8h.html#afa85e97bfbf9bf1c58e39263846c568f">H5P_DEFAULT</a>);</div>
<div class="line">     <a class="code hl_function" href="group___h5_d.html#ga8287d5a7be7b8e55ffeff68f7d26811c">H5Dread</a>(dset1, <a class="code hl_define" href="group___p_d_t_n_a_t.html#ga3cf93ffc6782be68070ef8e00f219ec2">H5T_NATIVE_INT</a>, <a class="code hl_define" href="_h5_spublic_8h.html#a5f96eeee84b987f18470737f85af0484">H5S_ALL</a>, <a class="code hl_define" href="_h5_spublic_8h.html#a5f96eeee84b987f18470737f85af0484">H5S_ALL</a>, <a class="code hl_define" href="_h5_ppublic_8h.html#afa85e97bfbf9bf1c58e39263846c568f">H5P_DEFAULT</a>, dset_buf);</div>
<div class="line">     <a class="code hl_function" href="group___h5_d.html#gae47c3f38db49db127faf221624c30609">H5Dclose</a>(dset1);</div>
<div class="line">     <a class="code hl_function" href="group___h5_r.html#ga026114e6c23588bf89bb473eb9e4d095">H5Rdestroy</a>(&amp;new_ref_buf[0]);</div>
<div class="line"> </div>
<div class="line">     <span class="keywordflow">for</span> (i = 0; i &lt; BUF_SIZE; i++)</div>
<div class="line">         assert(dset_buf[i] == i);</div>
<div class="line">     <span class="keywordflow">return</span> 0;</div>
<div class="line"> }</div>
<div class="ttc" id="a_h5_ipublic_8h_html_a01eab13dccc91afd6909d74dccb780ba"><div class="ttname"><a href="_h5_ipublic_8h.html#a01eab13dccc91afd6909d74dccb780ba">H5I_INVALID_HID</a></div><div class="ttdeci">#define H5I_INVALID_HID</div><div class="ttdef"><b>Definition</b> H5Ipublic.h:75</div></div>
<div class="ttc" id="agroup___p_d_t_s_t_d_html_gadc17e0960dc7ef08e029bf17201670e1"><div class="ttname"><a href="group___p_d_t_s_t_d.html#gadc17e0960dc7ef08e029bf17201670e1">H5T_STD_REF_OBJ</a></div><div class="ttdeci">#define H5T_STD_REF_OBJ</div><div class="ttdef"><b>Definition</b> H5Tpublic.h:418</div></div>
</div><!-- fragment --> </div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.9.7 </li>
  </ul>
</div>
</body>
</html>
